_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[49],{"3cy0":function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/knowledge",function(){return n("bZjr")}])},"FX+m":function(e,t,n){"use strict";var a=n("J3t6").default,r=n("nFQf").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=r(n("anXS")),o=r(n("Ntl0")),i=r(n("ctGQ")),u=a(n("q1tI")),c=r(n("4IMT")),s=n("4Blx");function f(e){return!(!e||!e.then)}var d=function(e){var t=u.useRef(!1),n=u.useRef(),a=(0,i.default)(!1),r=(0,o.default)(a,2),d=r[0],v=r[1],m=e.close,p=function(){null===m||void 0===m||m.apply(void 0,arguments)};u.useEffect((function(){var t;if(e.autoFocus){var a=n.current;t=setTimeout((function(){return a.focus()}))}return function(){t&&clearTimeout(t)}}),[]);var b=e.type,g=e.children,y=e.prefixCls,C=e.buttonProps;return u.createElement(c.default,(0,l.default)({},(0,s.convertLegacyProps)(b),{onClick:function(n){var a=e.actionFn;if(!t.current)if(t.current=!0,a){var r;if(e.emitEvent){if(r=a(n),e.quitOnNullishReturnValue&&!f(r))return t.current=!1,void p(n)}else if(a.length)r=a(m),t.current=!1;else if(!(r=a()))return void p();!function(e){f(e)&&(v(!0),e.then((function(){v(!1,!0),p.apply(void 0,arguments),t.current=!1}),(function(e){console.error(e),v(!1,!0),t.current=!1})))}(r)}else p()},loading:d,prefixCls:y},C,{ref:n}),g)};t.default=d},"JT4/":function(e,t,n){"use strict";n.d(t,"a",(function(){return F}));n("dc+4");var a=n("Btem"),r=n.n(a),l=n("wx14"),o=(n("MaXC"),n("4IMT")),i=n.n(o),u=(n("8YFG"),n("ATwu")),c=n.n(u),s=(n("CXCZ"),n("hqwM")),f=n.n(s),d=n("Ff2n"),v=(n("mN36"),n("N9UN")),m=n.n(v),p=n("q1tI"),b=n.n(p),g=n("yCxO"),y=n.n(g),C=n("0Kvv"),k=n("+T3G"),h=n("NVXP"),O=n("s1bl"),w=n("4rwI"),j=n("tV+F"),x=n.n(j),N=b.a.createElement,T=m.a.Meta,E=null,P=[{label:"\u6587\u4ef6\u540d\u79f0",field:"originalname",msg:"\u8bf7\u8f93\u5165\u6587\u4ef6\u540d\u79f0"},{label:"\u6587\u4ef6\u7c7b\u578b",field:"type",msg:"\u8bf7\u8f93\u5165\u6587\u4ef6\u7c7b\u578b"}],I={gutter:16,xs:1,sm:2,md:4,lg:4,xl:4,xxl:6},F=function(e){var t=e.visible,n=e.isCopy,a=void 0!==n&&n,o=e.closeAfterClick,u=void 0!==o&&o,s=e.onClose,v=e.onChange,b=Object(p.useRef)(),g=Object(O.a)(k.a.getFiles),j=g.loading,F=g.data,M=g.refresh,X=Object(d.a)(g,["loading","data","refresh"]),_=Object(p.useCallback)((function(e){e.stopPropagation(),E?E.update():E=new y.a(b.current,{inline:!1})}),[]),S=Object(p.useCallback)((function(e){a&&Object(C.a)(e.url),v&&v(e.url),u&&s()}),[a,v,u,s]),V=Object(p.useCallback)((function(e){return N(f.a,{className:x.a.imgs,grid:I,dataSource:e,renderItem:function(e){return N(f.a.Item,{key:e.id},N(m.a,{hoverable:!0,cover:N("div",{className:x.a.preview,onClick:_},N("img",{alt:e.originalname,src:e.url})),onClick:function(){return S(e)}},N(T,{title:e.originalname})))}})}),[S,_]);return N(r.a,{width:786,placement:"right",title:"\u6587\u4ef6\u9009\u62e9",closable:!0,onClose:s,visible:t},a&&N("div",{style:{marginBottom:16}},N(c.a,{message:"\u70b9\u51fb\u5361\u7247\u590d\u5236\u94fe\u63a5\uff0c\u70b9\u51fb\u56fe\u7247\u67e5\u770b\u5927\u56fe",type:"info"})),N("div",{ref:b},N(w.a,Object(l.a)({loading:j,data:F},X,{refresh:M,searchFields:P,rightNode:N(h.a,{onOK:M,useDragger:!1},N(i.a,null,"\u4e0a\u4f20\u6587\u4ef6")),customDataTable:V}))))}},M7TQ:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n("q1tI");function r(e){var t=Object(a.useState)(e),n=t[0],r=t[1];return[n,Object(a.useCallback)((function(){r((function(e){return!e}))}),[])]}},XnLC:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n("o0o1"),r=n.n(a),l=n("HaE+"),o=n("1OyB"),i=n("vuIU"),u=n("pUN5"),c=function(){function e(){Object(o.a)(this,e)}return Object(i.a)(e,null,[{key:"createBook",value:function(e){return u.a.post("/knowledge/book",e)}},{key:"createChapters",value:function(e){return u.a.post("/knowledge/chapter",e)}},{key:"deleteKnowledge",value:function(){var e=Object(l.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",u.a.delete("/knowledge/".concat(t)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateKnowledge",value:function(){var e=Object(l.a)(r.a.mark((function e(t,n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",u.a.patch("/knowledge/".concat(t),n));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getKnowledges",value:function(){var e=Object(l.a)(r.a.mark((function e(){var t,n=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.abrupt("return",u.a.get("/knowledge",{params:t}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getKnowledge",value:function(){var e=Object(l.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",u.a.get("/knowledge/".concat(t)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateKnowledgeViews",value:function(){var e=Object(l.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",u.a.post("/knowledge/".concat(t,"/views")));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}()},bZjr:function(e,t,n){"use strict";n.r(t);var a=n("wx14"),r=(n("MaXC"),n("4IMT")),l=n.n(r),o=(n("CXCZ"),n("hqwM")),i=n.n(o),u=(n("mN36"),n("N9UN")),c=n.n(u),s=(n("eOfH"),n("h0/l")),f=n.n(s),d=(n("93XW"),n("d1El")),v=n.n(d),m=n("Ff2n"),p=n("ODXe"),b=(n("ek7I"),n("FAat")),g=n.n(b),y=n("q1tI"),C=n.n(y),k=n("YFqc"),h=n.n(k),O=n("G3dp"),w=n("eFNv"),j=n("/MfK"),x=n("xvlK"),N=n("3NWV"),T=n("ELla"),E=n("M7TQ"),P=n("7LGd"),I=n("XnLC"),F=n("tjNU"),M=n("s1bl"),X=n("4rwI"),_=n("Pswk"),S=n.n(_),V=C.a.createElement,K={gutter:16,xs:1,sm:2,md:4,lg:4,xl:4,xxl:6},L=[{label:"\u540d\u79f0",field:"title",msg:"\u8bf7\u8f93\u5165\u77e5\u8bc6\u5e93\u540d\u79f0"},{label:"\u72b6\u6001",field:"status",children:V(g.a,{style:{width:180}},[{label:"\u5df2\u53d1\u5e03",value:"publish"},{label:"\u8349\u7a3f",value:"draft"}].map((function(e){return V(g.a.Option,{key:e.label,value:e.value},e.label)})))}];t.default=function(){var e=Object(E.a)(!1),t=Object(p.a)(e,2),n=t[0],r=t[1],o=Object(y.useState)(null),u=o[0],s=o[1],d=Object(M.a)(I.a.getKnowledges),b=d.loading,g=d.data,C=d.refresh,k=Object(m.a)(d,["loading","data","refresh"]),_=Object(P.a)(I.a.updateKnowledge),q=Object(p.a)(_,1)[0],B=Object(P.a)(I.a.deleteKnowledge),J=Object(p.a)(B,1)[0],R=Object(y.useCallback)((function(e){s(e),r()}),[r]),U=Object(y.useCallback)((function(e){q(e.id,{status:"draft"===e.status?"publish":"draft"}).then((function(){C()}))}),[q,C]),G=Object(y.useCallback)((function(e){J(e.id).then((function(){C()}))}),[J,C]);Object(y.useEffect)((function(){!n&&u&&s(null)}),[n,u]);var Q=Object(y.useCallback)((function(e){return V(i.a.Item,{key:e.id},V(c.a,{loading:b,style:{width:"100%"},cover:V("img",{className:S.a.cover,alt:e.title,src:e.cover}),actions:[V(h.a,{key:"edit",href:"/knowledge/editor/[id]",as:"/knowledge/editor/"+e.id},V("a",null,V(O.a,{key:"edit"}))),V(v.a,{key:"status",title:"draft"===e.status?"\u53d1\u5e03\u7ebf\u4e0a":"\u8bbe\u4e3a\u8349\u7a3f"},V(N.a,{onClick:function(){return U(e)},type:"draft"===e.status?"cloud-upload":"cloud-download"})),V(w.a,{key:"setting",onClick:function(){return R(e)}}),V(f.a,{key:"delete",title:"\u786e\u8ba4\u5220\u9664\uff1f",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onConfirm:function(){return G(e)}},V(j.a,{key:"setting"}))]},V(c.a.Meta,{title:e.title,description:e.summary})))}),[b,R,G,U]);return V(T.a,null,V(X.a,Object(a.a)({loading:b,data:g},k,{refresh:C,searchFields:L,rightNode:V(l.a,{type:"primary",onClick:r},V(x.a,null),"\u65b0\u5efa"),customDataTable:function(e){return V(i.a,{className:S.a.imgs,grid:K,dataSource:e,renderItem:Q})}})),V(F.a,{visible:n,toggleVisible:r,book:u,onOk:C}))}},eOfH:function(e,t,n){"use strict";n("hcgS"),n("MaXC"),n("/xgg"),n("iteM")},"h0/l":function(e,t,n){"use strict";var a=n("nFQf").default,r=n("J3t6").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=a(n("anXS")),o=a(n("Ntl0")),i=a(n("sKbD")),u=a(n("TSYQ")),c=a(n("EO2L")),s=a(n("ftrU")),f=r(n("q1tI")),d=n("vgIT"),v=a(n("aOJk")),m=n("vCXI"),p=n("yvsJ"),b=void 0,g=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n},y=f.forwardRef((function(e,t){var n=f.useContext(d.ConfigContext).getPrefixCls,a=(0,c.default)(!1,{value:e.visible,defaultValue:e.defaultVisible}),r=(0,o.default)(a,2),i=r[0],y=r[1],C=function(t,n){var a;y(t,!0),null===(a=e.onVisibleChange)||void 0===a||a.call(e,t,n)},k=e.prefixCls,h=e.placement,O=e.children,w=e.overlayClassName,j=g(e,["prefixCls","placement","children","overlayClassName"]),x=n("popover",k),N=n("popconfirm",k),T=(0,u.default)(N,w);return f.createElement(v.default,(0,l.default)({},j,{prefixCls:x,placement:h,onVisibleChange:function(t){e.disabled||C(t)},visible:i,_overlay:f.createElement(p.Overlay,(0,l.default)({},e,{prefixCls:x,close:function(e){C(!1,e)},onConfirm:function(t){var n;return null===(n=e.onConfirm)||void 0===n?void 0:n.call(b,t)},onCancel:function(t){var n;C(!1,t),null===(n=e.onCancel)||void 0===n||n.call(b,t)}})),overlayClassName:T,ref:t}),(0,m.cloneElement)(O,{onKeyDown:function(e){var t,n;f.isValidElement(O)&&(null===(n=null===O||void 0===O?void 0:(t=O.props).onKeyDown)||void 0===n||n.call(t,e)),function(e){e.keyCode===s.default.ESC&&i&&C(!1,e)}(e)}}))}));y.defaultProps={placement:"top",trigger:"click",okType:"primary",icon:f.createElement(i.default,null),disabled:!1};var C=y;t.default=C},iteM:function(e,t,n){},"tV+F":function(e,t,n){e.exports={preview:"Ww9TX_Nr4kCUq3meZJEr-"}},tjNU:function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));n("dc+4");var a=n("Btem"),r=n.n(a),l=(n("MaXC"),n("4IMT")),o=n.n(l),i=(n("LGkk"),n("rVaU")),u=n.n(i),c=(n("cUip"),n("iJl9")),s=n.n(c),f=(n("tL+A"),n("QpBz")),d=n.n(f),v=n("ODXe"),m=n("q1tI"),p=n.n(m),b=n("M7TQ"),g=n("7LGd"),y=n("XnLC"),C=n("JT4/"),k=n("NVXP"),h=p.a.createElement,O=function(e){var t=e.visible,n=e.toggleVisible,a=e.book,l=void 0===a?null:a,i=e.onOk,c=null!==l,f=Object(b.a)(!1),p=Object(v.a)(f,2),O=p[0],w=p[1],j=Object(g.a)(y.a.createBook),x=Object(v.a)(j,2),N=x[0],T=x[1],E=Object(g.a)(y.a.updateKnowledge),P=Object(v.a)(E,2),I=P[0],F=P[1],M=Object(m.useState)(l&&l.title||""),X=M[0],_=M[1],S=Object(m.useState)(l&&l.summary||""),V=S[0],K=S[1],L=Object(m.useState)(l&&l.isCommentable||!0),q=L[0],B=L[1],J=Object(m.useState)(l&&l.cover||""),R=J[0],U=J[1],G=Object(m.useCallback)((function(){var e={title:X.trim(),cover:R,summary:V.trim(),isCommentable:q};(c?I(l.id,e):N(e)).then((function(e){d.a.success(c?"\u66f4\u65b0\u6210\u529f":"\u521b\u5efa\u6210\u529f"),n(),i(e)}))}),[X,V,q,R,c,I,N,l,n,i]);return Object(m.useEffect)((function(){_(l&&l.title||""),K(l&&l.summary||""),B(l&&l.isCommentable||!1),U(l&&l.cover||"")}),[l]),h(r.a,{title:c?"\u66f4\u65b0\u77e5\u8bc6\u5e93":"\u65b0\u5efa\u77e5\u8bc6\u5e93",width:600,visible:t,onClose:n},h("div",{className:"form-item"},h("label",{htmlFor:"title"},"\u540d\u79f0"),h("div",null,h(s.a,{id:"title",value:X,onChange:function(e){return _(e.target.value)}}))),h("div",{className:"form-item"},h("label",{htmlFor:"summary"},"\u63cf\u8ff0"),h("div",null,h(s.a.TextArea,{autoSize:{minRows:3,maxRows:6},id:"summary",value:V,onChange:function(e){return K(e.target.value)}}))),h("div",{className:"form-item"},h("label",{htmlFor:"title"},"\u8bc4\u8bba"),h("div",null,h(u.a,{checked:q,onChange:B}))),h("div",{className:"form-item"},h("label",{htmlFor:"upload"},"\u5c01\u9762"),h("div",null,h(k.a,{style:{width:"100%",minHeight:160},onChange:U},R?h("img",{src:R,alt:"avatar",style:{width:"100%"}}):null),h(s.a,{value:R,style:{marginTop:12}}),h(o.a,{style:{marginTop:12},onClick:w},"\u9009\u62e9\u6587\u4ef6"),R&&h(o.a,{style:{marginTop:12,marginLeft:12},danger:!0,onClick:function(){return U("")}},"\u79fb\u9664"))),h(C.a,{visible:O,onClose:w,onChange:function(e){U(e),w()}}),h("div",{style:{position:"absolute",bottom:0,width:"100%",borderTop:"1px solid #e8e8e8",padding:"10px 16px",textAlign:"right",left:0,background:"#fff",borderRadius:"0 0 4px 4px"}},h(o.a,{onClick:n},"\u53d6\u6d88"),h(o.a,{style:{marginLeft:8},type:"primary",disabled:!X.trim(),loading:c?F:T,onClick:G},c?"\u66f4\u65b0":"\u521b\u5efa")))}},yvsJ:function(e,t,n){"use strict";var a=n("J3t6").default,r=n("nFQf").default;Object.defineProperty(t,"__esModule",{value:!0}),t.Overlay=function(e){var t=e.prefixCls,n=e.okButtonProps,a=e.cancelButtonProps,r=e.title,m=e.cancelText,p=e.okText,b=e.okType,g=e.icon,y=e.showCancel,C=void 0===y||y,k=e.close,h=e.onConfirm,O=e.onCancel,w=o.useContext(v.ConfigContext).getPrefixCls;return o.createElement(s.default,{componentName:"Popconfirm",defaultLocale:f.default.Popconfirm},(function(e){return o.createElement("div",{className:"".concat(t,"-inner-content")},o.createElement("div",{className:"".concat(t,"-message")},g,o.createElement("div",{className:"".concat(t,"-message-title")},(0,d.getRenderPropValue)(r))),o.createElement("div",{className:"".concat(t,"-buttons")},C&&o.createElement(i.default,(0,l.default)({onClick:O,size:"small"},a),m||e.cancelText),o.createElement(c.default,{buttonProps:(0,l.default)((0,l.default)({size:"small"},(0,u.convertLegacyProps)(b)),n),actionFn:h,close:k,prefixCls:w("btn"),quitOnNullishReturnValue:!0,emitEvent:!0},p||e.okText)))}))};var l=r(n("anXS")),o=a(n("q1tI")),i=r(n("4IMT")),u=n("4Blx"),c=r(n("FX+m")),s=r(n("GG9M")),f=r(n("PE/4")),d=n("yBST"),v=n("vgIT")}},[["3cy0",2,3,0,4,5,6,7,8,9,10,11,12,13,14,17,15,16,19,20,21,26,1]]]);