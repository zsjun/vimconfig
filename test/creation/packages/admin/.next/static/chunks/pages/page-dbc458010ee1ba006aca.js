_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[54],{"77S4":function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var a=n("rePB"),r=n("q1tI"),u=n.n(r),c=n("MT78"),i=n.n(c),o=n("cVA7"),s=n.n(o),l=n("sWYD"),p=n("MLMA"),f=u.a.createElement;function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var y=function(e){var t=e.data,n=(void 0===t?[]:t).map((function(e){return b(b({},e),{},{updateAt:Object(l.a)(new Date(e.updateAt),"yyyy-MM-dd")})})),a=Object(p.b)(n,(function(e){return e.updateAt})),r=Object.keys(a).reduce((function(e,t){return e.push({updateAt:t,count:a[t].reduce((function(e,t){return e+t.count}),0)}),e}),[]),u={grid:{top:"3%",left:"3%",right:"4%",bottom:"3%",containLabel:!0},tooltip:{trigger:"axis",formatter:function(e){var t=e&&e[0]&&r[e[0].dataIndex];return"\u65e5\u671f\uff1a".concat(t.updateAt,"<br />\u8bbf\u95ee\u91cf\uff1a").concat(t.count)}},xAxis:{type:"category",boundaryGap:!1,data:r.map((function(e){return e.updateAt}))},yAxis:{type:"value",boundaryGap:[0,"100%"]},dataZoom:[{type:"inside"},{handleIcon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4v1.3h1.3v-1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7V23h6.6V24.4z M13.3,19.6H6.7v-1.4h6.6V19.6z",handleSize:"80%",handleStyle:{color:"#fff",shadowBlur:3,shadowColor:"rgba(0, 0, 0, 0.6)",shadowOffsetX:2,shadowOffsetY:2}}],series:[{type:"line",smooth:!0,symbol:"none",sampling:"average",itemStyle:{color:"rgb(255, 70, 131)"},areaStyle:{color:new i.a.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgb(255, 158, 68)"},{offset:1,color:"rgb(255, 70, 131)"}])},data:r.map((function(e){return e.count}))}]};return f(s.a,{option:u})}},TYx8:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/page",function(){return n("oa3P")}])},gJK1:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n("o0o1"),r=n.n(a),u=n("HaE+"),c=n("1OyB"),i=n("vuIU"),o=n("pUN5"),s=function(){function e(){Object(c.a)(this,e)}return Object(i.a)(e,null,[{key:"getViews",value:function(){var e=Object(u.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",o.a.get("/view",{params:t}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"addView",value:function(){var e=Object(u.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",o.a.post("/view",t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getViewsByUrl",value:function(){var e=Object(u.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",o.a.get("/view/url",{params:{url:t}}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteView",value:function(){var e=Object(u.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",o.a.delete("/view/"+t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}()},oa3P:function(e,t,n){"use strict";n.r(t);n("fwXI");var a=n("CC+v"),r=n.n(a),u=(n("nT0F"),n("MM9K")),c=n.n(u),i=n("wx14"),o=(n("eOfH"),n("h0/l")),s=n.n(o),l=(n("lSEL"),n("UIqZ")),p=n.n(l),f=(n("MaXC"),n("4IMT")),d=n.n(f),b=(n("tL+A"),n("QpBz")),y=n.n(b),v=n("rePB"),h=n("ODXe"),g=n("Ff2n"),m=(n("ek7I"),n("FAat")),w=n.n(m),O=(n("CbT5"),n("RWbP")),k=n.n(O),j=n("q1tI"),x=n.n(j),P=n("YFqc"),A=n.n(P),C=n("xvlK"),I=n("MLMA"),M=n("6HBy"),E=n("M7TQ"),T=n("7LGd"),N=n("s1bl"),S=n("4rwI"),_=n("ELla"),B=n("tGXm"),z=n("gJK1"),L=n("JMli"),V=n("77S4"),H=n("BaxT"),U=n.n(H),X=x.a.createElement,D=null,F=[{title:"\u8def\u5f84",dataIndex:"path",key:"path"},{title:"\u987a\u5e8f",dataIndex:"order",key:"order"},{title:"\u9605\u8bfb\u91cf",dataIndex:"views",key:"views",render:function(e){return X(k.a,{count:e,showZero:!0,overflowCount:1/0,style:{backgroundColor:"#52c41a"}})}},{title:"\u72b6\u6001",dataIndex:"status",key:"status",render:function(e){var t="draft"===e;return X(k.a,{color:t?"gold":"green",text:t?"\u8349\u7a3f":"\u5df2\u53d1\u5e03"})}},{title:"\u53d1\u5e03\u65f6\u95f4",dataIndex:"publishAt",key:"publishAt",render:function(e){return X(L.a,{date:e})}}],G=[{label:"\u540d\u79f0",field:"name",msg:"\u8bf7\u8f93\u5165\u9875\u9762\u540d\u79f0"},{label:"\u8def\u5f84",field:"path",msg:"\u8bf7\u8f93\u5165\u9875\u9762\u8def\u5f84"},{label:"\u72b6\u6001",field:"status",children:X(w.a,{style:{width:180}},[{label:"\u5df2\u53d1\u5e03",value:"publish"},{label:"\u8349\u7a3f",value:"draft"}].map((function(e){return X(w.a.Option,{key:e.label,value:e.value},e.label)})))}];t.default=function(){var e=Object(M.a)(),t=Object(N.a)(B.a.getPages),n=t.loading,a=t.data,u=t.refresh,o=Object(g.a)(t,["loading","data","refresh"]),l=Object(E.a)(!1),f=Object(h.a)(l,2),b=f[0],m=f[1],w=Object(j.useState)([]),O=w[0],k=w[1],P=Object(T.a)(B.a.updatePage),L=Object(h.a)(P,2),H=L[0],R=L[1],J=Object(T.a)(B.a.deletePage),K=Object(h.a)(J,2),Y=K[0],q=K[1],Z=Object(T.a)(z.a.getViewsByUrl),Q=Object(h.a)(Z,2),W=Q[0],$=Q[1],ee=Object(j.useCallback)((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return Array.isArray(e)||(e=[e]),function(){return Promise.all(e.map((function(e){return H(e.id,Object(v.a)({},t,null!==n?n:!e[t]))}))).then((function(){y.a.success("\u64cd\u4f5c\u6210\u529f"),u()}))}}),[H,u]),te=Object(j.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return Array.isArray(e)||(e=[e]),function(){Promise.all(e.map((function(e){return Y(e)}))).then((function(){y.a.success("\u64cd\u4f5c\u6210\u529f"),t&&t(),u()}))}}),[Y,u]),ne=Object(j.useCallback)((function(e){m(),W(e).then((function(e){k(e)}))}),[m,W]),ae=Object(j.useCallback)((function(){m(),k([])}),[m]),re={title:"\u540d\u79f0",dataIndex:"name",key:"name",render:function(t,n){return X("a",{href:Object(I.d)(e.systemUrl||"","/page/".concat(n.path)),target:"_blank",rel:"noreferrer"},t)}},ue=function(t){return{title:"\u64cd\u4f5c",key:"action",render:function(n,a){var r="draft"===a.status;return X("span",{className:U.a.action},X(A.a,{href:"/page/editor/[id]",as:"/page/editor/"+a.id},X("a",null,X(d.a,{type:"link",size:"small"},"\u7f16\u8f91"))),X(p.a,{type:"vertical"}),r?X(d.a,{type:"link",size:"small",onClick:ee(a,"status","publish")},"\u53d1\u5e03"):X(d.a,{type:"link",size:"small",onClick:ee(a,"status","draft")},"\u4e0b\u7ebf"),X(p.a,{type:"vertical"}),X(d.a,{type:"link",size:"small",onClick:function(){return ne(Object(I.d)(e.systemUrl,"/page/"+a.id))}},"\u67e5\u770b\u8bbf\u95ee"),X(p.a,{type:"vertical"}),X(s.a,{title:"\u786e\u8ba4\u5220\u9664\u8fd9\u4e2a\u6587\u7ae0\uff1f",onConfirm:te(a.id,t),okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",okButtonProps:{loading:q}},X(d.a,{type:"link",size:"small"},"\u5220\u9664")))}}};return Object(j.useEffect)((function(){R?D=y.a.loading("\u64cd\u4f5c\u4e2d...",0):D&&D()}),[R]),X(_.a,null,X("div",{className:U.a.wrapper},X(S.a,Object(i.a)({showSelection:!0,loading:n,data:a,columns:function(e){return[re].concat(F,[ue(e)])},refresh:u},o,{renderLeftNode:function(e){var t=e.hasSelected,n=e.selectedRowKeys,a=e.selectedRows,r=e.resetSelectedRows;return t?X(x.a.Fragment,null,X(d.a,{disabled:!t,style:{marginRight:8},onClick:ee(a,"status","publish")},"\u53d1\u5e03"),X(d.a,{disabled:!t,style:{marginRight:8},onClick:ee(a,"status","draft")},"\u4e0b\u7ebf"),X(s.a,{title:"\u786e\u8ba4\u5220\u9664\uff1f",onConfirm:te(n,r),okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88"},X(d.a,{disabled:!t,loading:!1,danger:!0},"\u5220\u9664"))):null},rightNode:X(A.a,{href:"/page/editor"},X("a",null,X(d.a,{type:"primary"},X(C.a,null),"\u65b0\u5efa"))),searchFields:G})),X(r.a,{title:"\u8bbf\u95ee\u7edf\u8ba1",visible:b,width:640,onCancel:ae,maskClosable:!1,footer:null,transitionName:"",maskTransitionName:""},X("div",{style:{textAlign:"center"}},X(c.a,{spinning:$},X(V.a,{data:O}))))))}},tGXm:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var a=n("o0o1"),r=n.n(a),u=n("HaE+"),c=n("1OyB"),i=n("vuIU"),o=n("pUN5"),s=n("M55E"),l=new s.Converter({tables:!0,simplifiedAutoLink:!0,strikethrough:!0,tasklists:!0,emoji:!0}),p=function(){function e(){Object(c.a)(this,e)}return Object(i.a)(e,null,[{key:"getPages",value:function(){var e=Object(u.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",o.a.get("/page",{params:t}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAllPublisedPages",value:function(){var e=Object(u.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",o.a.get("/page",{params:{status:"publish"}}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getPage",value:function(){var e=Object(u.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",o.a.get("/page/".concat(t)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"addPage",value:function(){var e=Object(u.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.html=l.makeHtml(t.content),e.abrupt("return",o.a.post("/page",t));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"updatePage",value:function(){var e=Object(u.a)(r.a.mark((function e(t,n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.html=l.makeHtml(n.content),e.abrupt("return",o.a.patch("/page/".concat(t),n));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updatePageViews",value:function(){var e=Object(u.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",o.a.post("/page/".concat(t,"/views")));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"deletePage",value:function(){var e=Object(u.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",o.a.delete("/page/".concat(t)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}()}},[["TYx8",2,3,0,4,5,6,7,8,9,10,11,12,13,14,17,18,23,25,28,29,1]]]);