{"ast":null,"code":"import \"antd/lib/button/style\";\nimport _Button from \"antd/lib/button\";\nimport \"antd/lib/input/style\";\nimport _Input from \"antd/lib/input\";\nimport \"antd/lib/message/style\";\nimport _message from \"antd/lib/message\";\nvar __jsx = React.createElement;\nimport React, { useState, useEffect } from 'react';\nimport { FileImageOutlined } from '@ant-design/icons';\nimport { Form } from '@ant-design/compatible';\nimport { FileSelectDrawer } from '@/components/FileSelectDrawer';\nimport { SettingProvider } from '@/providers/setting';\nexport var SystemSetting = function SystemSetting(_ref) {\n  var setting = _ref.setting;\n\n  var _useState = useState(false),\n      visible = _useState[0],\n      setVisible = _useState[1];\n\n  var _useState2 = useState('logo'),\n      mode = _useState2[0],\n      setMode = _useState2[1];\n\n  var _useState3 = useState(null),\n      systemUrl = _useState3[0],\n      setSystemUrl = _useState3[1];\n\n  var _useState4 = useState(null),\n      systemTitle = _useState4[0],\n      setSystemTitle = _useState4[1];\n\n  var _useState5 = useState(null),\n      systemLogo = _useState5[0],\n      setSystemLogo = _useState5[1];\n\n  var _useState6 = useState(null),\n      systemFavicon = _useState6[0],\n      setSystemFavicon = _useState6[1];\n\n  var _useState7 = useState(null),\n      systemFooterInfo = _useState7[0],\n      setSystemFooterInfo = _useState7[1];\n\n  var _useState8 = useState(null),\n      adminSystemUrl = _useState8[0],\n      setAdminSystemUrl = _useState8[1];\n\n  useEffect(function () {\n    setSystemUrl(setting && setting.systemUrl || null);\n    setSystemTitle(setting && setting.systemTitle || null);\n    setSystemLogo(setting && setting.systemLogo || null);\n    setSystemFavicon(setting && setting.systemFavicon || null);\n    setSystemFooterInfo(setting && setting.systemFooterInfo || null);\n    setAdminSystemUrl(setting && setting.adminSystemUrl || null);\n  }, [setting]);\n\n  var save = function save() {\n    var data = {\n      systemUrl: systemUrl,\n      systemTitle: systemTitle,\n      systemLogo: systemLogo,\n      systemFavicon: systemFavicon,\n      systemFooterInfo: systemFooterInfo,\n      adminSystemUrl: adminSystemUrl\n    };\n    SettingProvider.updateSetting(data).then(function () {\n      _message.success('保存成功');\n    });\n  };\n\n  return __jsx(Form, {\n    layout: \"vertical\"\n  }, __jsx(Form.Item, {\n    label: \"\\u7CFB\\u7EDF\\u5730\\u5740\"\n  }, __jsx(_Input, {\n    placeholder: \"\\u8BF7\\u8F93\\u5165\\u7CFB\\u7EDF\\u5730\\u5740\",\n    value: systemUrl,\n    onChange: function onChange(e) {\n      setSystemUrl(e.target.value);\n    }\n  })), __jsx(Form.Item, {\n    label: \"\\u540E\\u53F0\\u5730\\u5740\"\n  }, __jsx(_Input, {\n    placeholder: \"\\u8BF7\\u8F93\\u5165\\u540E\\u53F0\\u5730\\u5740\",\n    value: adminSystemUrl,\n    onChange: function onChange(e) {\n      setAdminSystemUrl(e.target.value);\n    }\n  })), __jsx(Form.Item, {\n    label: \"\\u7CFB\\u7EDF\\u6807\\u9898\"\n  }, __jsx(_Input, {\n    placeholder: \"\\u8BF7\\u8F93\\u5165\\u7CFB\\u7EDF\\u6807\\u9898\\uFF0C\\u5C06\\u4F5C\\u4E3A head.title \\u663E\\u793A\",\n    value: systemTitle,\n    onChange: function onChange(e) {\n      setSystemTitle(e.target.value);\n    }\n  })), __jsx(Form.Item, {\n    label: \"Logo\"\n  }, __jsx(_Input, {\n    placeholder: \"\\u8BF7\\u8F93\\u5165 logo \\u94FE\\u63A5\\u6216\\u9009\\u62E9\\u6587\\u4EF6\\uFF0C\\u4E5F\\u53EF\\u8F93\\u5165 html\",\n    addonAfter: __jsx(FileImageOutlined, {\n      onClick: function onClick() {\n        setMode('logo');\n        setVisible(true);\n      }\n    }),\n    value: systemLogo,\n    onChange: function onChange(e) {\n      setSystemLogo(e.target.value);\n    }\n  })), __jsx(Form.Item, {\n    label: \"Favicon\"\n  }, __jsx(_Input, {\n    placeholder: \"\\u8BF7\\u8F93\\u5165 favicon \\u94FE\\u63A5\\u6216\\u9009\\u62E9\\u6587\\u4EF6\",\n    addonAfter: __jsx(FileImageOutlined, {\n      onClick: function onClick() {\n        setMode('favicon');\n        setVisible(true);\n      }\n    }),\n    value: systemFavicon,\n    onChange: function onChange(e) {\n      setSystemFavicon(e.target.value);\n    }\n  })), __jsx(Form.Item, {\n    label: \"\\u9875\\u811A\\u4FE1\\u606F\"\n  }, __jsx(_Input.TextArea, {\n    placeholder: \"\\u8BF7\\u8F93\\u5165\\u9875\\u811A\\u4FE1\\u606F\",\n    rows: 8,\n    value: systemFooterInfo,\n    onChange: function onChange(e) {\n      setSystemFooterInfo(e.target.value);\n    }\n  })), __jsx(FileSelectDrawer, {\n    visible: visible,\n    closeAfterClick: true,\n    onClose: function onClose() {\n      return setVisible(false);\n    },\n    onChange: function onChange(url) {\n      if (mode === 'logo') {\n        setSystemLogo(url);\n      } else {\n        setSystemFavicon(url);\n      }\n    }\n  }), __jsx(_Button, {\n    type: \"primary\",\n    onClick: save\n  }, \"\\u4FDD\\u5B58\"));\n};","map":null,"metadata":{},"sourceType":"module"}