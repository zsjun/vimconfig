{"ast":null,"code":"import \"antd/lib/spin/style\";\nimport _Spin from \"antd/lib/spin\";\nimport _extends from \"/Users/zsj/work/vimconfig/test/creation/packages/admin/node_modules/@babel/runtime/helpers/esm/extends\";\nimport \"antd/lib/upload/style\";\nimport _Upload from \"antd/lib/upload\";\nimport \"antd/lib/message/style\";\nimport _message from \"antd/lib/message\";\nvar __jsx = React.createElement;\nimport React, { useState } from 'react';\nimport { InboxOutlined } from '@ant-design/icons';\nimport { FileProvider } from '@/providers/file';\nexport var Upload = function Upload(_ref) {\n  var _ref$onChange = _ref.onChange,\n      onChange = _ref$onChange === void 0 ? null : _ref$onChange,\n      _ref$onOK = _ref.onOK,\n      onOK = _ref$onOK === void 0 ? null : _ref$onOK,\n      _ref$style = _ref.style,\n      style = _ref$style === void 0 ? {} : _ref$style,\n      _ref$useDragger = _ref.useDragger,\n      useDragger = _ref$useDragger === void 0 ? true : _ref$useDragger,\n      _ref$children = _ref.children,\n      children = _ref$children === void 0 ? null : _ref$children;\n\n  var _useState = useState(false),\n      loading = _useState[0],\n      setLoading = _useState[1];\n\n  var uploadProps = {\n    name: 'file',\n    multiple: true,\n    action: '',\n    showUploadList: false,\n    beforeUpload: function beforeUpload(file) {\n      setLoading(true);\n      FileProvider.uploadFile(file).then(function (res) {\n        setLoading(false);\n\n        _message.success('上传成功');\n\n        onChange && onChange(res.url);\n        onOK && onOK();\n      })[\"catch\"](function () {\n        setLoading(false);\n      });\n      return Promise.reject(new Error('cancel'));\n    }\n  };\n  var Wrap = useDragger ? _Upload.Dragger : _Upload;\n  return __jsx(_Spin, {\n    tip: \"\\u6587\\u4EF6\\u4E0A\\u4F20\\u4E2D...\",\n    spinning: loading\n  }, __jsx(Wrap, _extends({}, uploadProps, {\n    style: style\n  }), children || __jsx(React.Fragment, null, __jsx(\"p\", {\n    className: \"ant-upload-drag-icon\"\n  }, __jsx(InboxOutlined, null)), __jsx(\"p\", {\n    className: \"ant-upload-text\"\n  }, \"\\u70B9\\u51FB\\u9009\\u62E9\\u6587\\u4EF6\\u6216\\u5C06\\u6587\\u4EF6\\u62D6\\u62FD\\u5230\\u6B64\\u5904\"), __jsx(\"p\", {\n    className: \"ant-upload-hint\"\n  }, \"\\u6587\\u4EF6\\u5C06\\u4E0A\\u4F20\\u5230 OSS, \\u5982\\u672A\\u914D\\u7F6E\\u8BF7\\u5148\\u914D\\u7F6E\"))));\n};","map":null,"metadata":{},"sourceType":"module"}