{"ast":null,"code":"import \"antd/lib/message/style\";\nimport _message from \"antd/lib/message\";\nimport axios from 'axios';\nimport { toLogin } from '@/utils/login';\nexport const httpProvider = axios.create({\n  baseURL: process.env.SERVER_API_URL,\n  timeout: 60000\n});\nhttpProvider.interceptors.request.use(config => {\n  if (false) {\n    const token = window.localStorage.getItem('token');\n\n    if (token) {\n      config.headers.Authorization = `Bearer ${token}`;\n    }\n  }\n\n  return config;\n}, () => {\n  throw new Error('发起请求出错');\n});\nhttpProvider.interceptors.response.use(data => {\n  if (data.status && +data.status === 200 && data.data.status === 'error') {\n    false && _message.error({\n      message: data.data.msg\n    });\n    return null;\n  }\n\n  const res = data.data;\n\n  if (!res.success) {\n    _message.error(res.msg);\n\n    return null;\n  }\n\n  return res.data;\n}, err => {\n  if (err && err.response && err.response.status) {\n    const status = err.response.status;\n    const isClient = false;\n\n    switch (status) {\n      case 504:\n      case 404:\n        isClient && _message.error('服务器异常');\n        break;\n\n      case 403:\n        isClient && _message.warn('访客无权进行该操作');\n        break;\n\n      case 401:\n        isClient && _message.info('请重新登录');\n        toLogin();\n        break;\n\n      default:\n        isClient && _message.error(err.response && err.response.data && err.response.data.msg || '未知错误!');\n    }\n  }\n\n  return Promise.reject(err);\n});","map":null,"metadata":{},"sourceType":"module"}