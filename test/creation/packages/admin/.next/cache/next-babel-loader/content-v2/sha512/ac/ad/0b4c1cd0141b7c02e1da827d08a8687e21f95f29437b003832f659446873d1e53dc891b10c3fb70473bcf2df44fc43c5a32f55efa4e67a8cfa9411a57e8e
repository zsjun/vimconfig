{"ast":null,"code":"import \"antd/lib/button/style\";\nimport _Button from \"antd/lib/button\";\nimport \"antd/lib/alert/style\";\nimport _Alert from \"antd/lib/alert\";\nimport \"antd/lib/message/style\";\nimport _message from \"antd/lib/message\";\nvar __jsx = React.createElement;\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { Form } from '@ant-design/compatible';\nimport { safeJsonParse } from '@/utils/json';\nimport { SettingProvider } from '@/providers/setting';\nimport { JsonEditor } from '@/components/JsonEditor';\nexport var OSSSetting = function OSSSetting(_ref) {\n  var setting = _ref.setting;\n\n  var _useState = useState({}),\n      oss = _useState[0],\n      setOss = _useState[1];\n\n  useEffect(function () {\n    setOss(safeJsonParse(setting.oss));\n  }, [setting.oss]);\n  var save = useCallback(function () {\n    var data = {\n      oss: JSON.stringify(oss)\n    };\n    SettingProvider.updateSetting(data).then(function () {\n      _message.success('保存成功');\n    });\n  }, [oss]);\n  return __jsx(Form, {\n    layout: \"vertical\"\n  }, __jsx(_Alert, {\n    message: \"\\u8BF4\\u660E\",\n    description: \"\\u8BF7\\u5728\\u7F16\\u8F91\\u5668\\u4E2D\\u8F93\\u5165\\u60A8\\u7684 oss \\u914D\\u7F6E\\uFF0C\\u5E76\\u6DFB\\u52A0 type \\u5B57\\u6BB5\\u533A\\u5206 \\r\\n {\\\"type\\\":\\\"aliyun\\\",\\\"accessKeyId\\\":\\\"\\\",\\\"accessKeySecret\\\":\\\"\\\",\\\"bucket\\\":\\\"\\\",\\\"https\\\":true,\\\"region\\\":\\\"\\\"}\",\n    type: \"info\",\n    showIcon: true,\n    style: {\n      marginBottom: '1rem'\n    }\n  }), __jsx(JsonEditor, {\n    value: JSON.stringify(oss, null, 2),\n    onChange: setOss,\n    style: {\n      height: '400px',\n      overflow: 'hidden',\n      border: '1px solid var(--border-color)',\n      marginBottom: 24\n    }\n  }), __jsx(_Button, {\n    type: \"primary\",\n    onClick: save\n  }, \"\\u4FDD\\u5B58\"));\n};","map":null,"metadata":{},"sourceType":"module"}