{"ast":null,"code":"import \"antd/lib/upload/style\";\nimport _Upload from \"antd/lib/upload\";\nimport \"antd/lib/tooltip/style\";\nimport _Tooltip from \"antd/lib/tooltip\";\nimport \"antd/lib/message/style\";\nimport _message from \"antd/lib/message\";\nvar __jsx = React.createElement;\nimport React from 'react';\nimport { FileProvider } from '@/providers/file';\nimport { monaco } from '../MonacoEditor';\nexport const Video = ({\n  editor\n}) => {\n  const uploadProps = {\n    name: 'file',\n    multiple: false,\n    accept: `.mp4, .mov, .wmv, .flv, .avi, .webm, .mkv, .avchd`,\n    action: '',\n    showUploadList: false,\n\n    beforeUpload(file) {\n      const hide = _message.loading('视频上传中...', 0);\n\n      FileProvider.uploadFile(file).then(res => {\n        _message.success('上传成功');\n\n        const result = `<video src=\"${res.url}\"></video>\\n`;\n        const p = editor.getPosition();\n        editor.executeEdits('', [{\n          range: new monaco.Range(p.lineNumber, p.column, p.lineNumber, p.column),\n          text: result\n        }]);\n        hide();\n      }).catch(() => {\n        _message.error('上传失败');\n\n        hide();\n      });\n      return Promise.reject(new Error('canceld'));\n    }\n\n  };\n  return __jsx(_Upload, uploadProps, __jsx(_Tooltip, {\n    title: '上传视频'\n  }, __jsx(\"svg\", {\n    viewBox: \"0 0 24 24\",\n    width: \"16px\",\n    height: \"16px\",\n    style: {\n      marginTop: 6\n    }\n  }, __jsx(\"path\", {\n    fillRule: \"evenodd\",\n    fill: \"currentColor\",\n    d: \"M21 19c0 1.1-.9 2-2 2H5c-1.1 0-2-.9-2-2V5c0-1.1.9-2 2-2h14c1.1 0 2 .9 2 2v14zm-5-7L9 8v8l7-4z\"\n  }))));\n};","map":null,"metadata":{},"sourceType":"module"}