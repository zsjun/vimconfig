{"ast":null,"code":"import \"antd/lib/row/style\";\nimport _Row from \"antd/lib/row\";\nimport \"antd/lib/button/style\";\nimport _Button from \"antd/lib/button\";\nimport \"antd/lib/input/style\";\nimport _Input from \"antd/lib/input\";\nimport \"antd/lib/col/style\";\nimport _Col from \"antd/lib/col\";\nimport \"antd/lib/modal/style\";\nimport _Modal from \"antd/lib/modal\";\nvar __jsx = React.createElement;\nimport React, { useCallback, useState } from 'react';\nimport { Form } from '@ant-design/compatible';\nimport { default as Router } from 'next/router';\nimport Link from 'next/link';\nimport { Helmet } from 'react-helmet';\nimport { UserProvider } from '@/providers/user';\nimport { Svg } from '@/assets/RegisterSvg';\nimport style from './index.module.scss';\n\nvar _Register = function _Register(_ref) {\n  var form = _ref.form;\n  var getFieldDecorator = form.getFieldDecorator;\n\n  var _useState = useState(false),\n      loading = _useState[0],\n      setLoading = _useState[1];\n\n  var compareToFirstPassword = function compareToFirstPassword(rule, value, callback) {\n    if (value && value !== form.getFieldValue('password')) {\n      callback('两次密码不一致');\n    } else {\n      callback();\n    }\n  };\n\n  var validateToNextPassword = function validateToNextPassword(rule, value, callback) {\n    if (value) {\n      form.validateFields(['confirm'], {\n        force: true\n      });\n    }\n\n    callback();\n  };\n\n  var submit = useCallback(function (e) {\n    e.preventDefault();\n    form.validateFields(function (err, values) {\n      if (!err) {\n        setLoading(true);\n        UserProvider.register(values).then(function () {\n          _Modal.confirm({\n            title: '注册成功',\n            content: '是否跳转至登录?',\n            okText: '确认',\n            cancelText: '取消',\n            onOk: function onOk() {\n              Router.push('/login');\n            },\n            onCancel: function onCancel() {\n              console.log('Cancel');\n            },\n            transitionName: '',\n            maskTransitionName: ''\n          });\n        })[\"catch\"](function () {\n          return setLoading(false);\n        });\n      }\n    });\n  }, [form]);\n  return __jsx(\"div\", {\n    className: style.wrapper\n  }, __jsx(Helmet, null, __jsx(\"title\", null, \"\\u8BBF\\u5BA2\\u6CE8\\u518C\")), __jsx(_Row, {\n    className: style.container\n  }, __jsx(_Col, {\n    xs: 0,\n    sm: 0,\n    md: 12\n  }, __jsx(Svg, null)), __jsx(_Col, {\n    xs: 24,\n    sm: 24,\n    md: 12\n  }, __jsx(\"div\", {\n    style: {\n      width: '100%'\n    }\n  }, __jsx(\"h2\", null, \"\\u8BBF\\u5BA2\\u6CE8\\u518C\"), __jsx(Form, {\n    layout: \"horizontal\",\n    onSubmit: submit\n  }, __jsx(Form.Item, {\n    hasFeedback: true,\n    label: \"\\u8D26\\u6237\"\n  }, getFieldDecorator('name', {\n    rules: [{\n      required: true,\n      message: '请输入用户名！'\n    }]\n  })(__jsx(_Input, {\n    autoComplete: 'off',\n    placeholder: \"\\u8BF7\\u8F93\\u5165\\u7528\\u6237\\u540D\"\n  }))), __jsx(Form.Item, {\n    hasFeedback: true,\n    label: \"\\u5BC6\\u7801\"\n  }, getFieldDecorator('password', {\n    rules: [{\n      required: true,\n      message: '请输入密码！'\n    }, {\n      validator: validateToNextPassword\n    }]\n  })(__jsx(_Input, {\n    autoComplete: 'off',\n    type: \"password\",\n    placeholder: \"\\u8BF7\\u8F93\\u5165\\u5BC6\\u7801\"\n  }))), __jsx(Form.Item, {\n    hasFeedback: true,\n    label: \"\\u786E\\u8BA4\"\n  }, getFieldDecorator('confirm', {\n    rules: [{\n      required: true,\n      message: '请再次输入密码！'\n    }, {\n      validator: compareToFirstPassword\n    }]\n  })(__jsx(_Input, {\n    autoComplete: 'off',\n    type: \"password\",\n    placeholder: \"\\u8BF7\\u518D\\u6B21\\u8F93\\u5165\\u5BC6\\u7801\"\n  }))), __jsx(Form.Item, null, __jsx(_Button, {\n    type: \"primary\",\n    htmlType: \"submit\",\n    size: \"large\",\n    style: {\n      width: '100%'\n    },\n    loading: loading,\n    disabled: loading\n  }, \"\\u6CE8\\u518C\"), \"Or\", ' ', __jsx(Link, {\n    href: \"/login\"\n  }, __jsx(\"a\", null, \"\\u53BB\\u767B\\u5F55\"))))))), __jsx(\"ul\", {\n    className: style.bubbles\n  }, Array.from({\n    length: 10\n  }).map(function (_, idx) {\n    return __jsx(\"li\", {\n      key: idx\n    });\n  })));\n};\n\nexport default Form.create({\n  name: 'register'\n})(_Register);","map":null,"metadata":{},"sourceType":"module"}