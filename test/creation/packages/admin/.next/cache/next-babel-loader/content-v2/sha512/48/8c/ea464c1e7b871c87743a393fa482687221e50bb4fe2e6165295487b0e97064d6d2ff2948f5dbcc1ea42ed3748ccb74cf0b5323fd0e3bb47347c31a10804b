{"ast":null,"code":"import \"antd/lib/row/style\";\nimport _Row from \"antd/lib/row\";\nimport \"antd/lib/button/style\";\nimport _Button from \"antd/lib/button\";\nimport \"antd/lib/input/style\";\nimport _Input from \"antd/lib/input\";\nimport \"antd/lib/col/style\";\nimport _Col from \"antd/lib/col\";\nvar __jsx = React.createElement;\nimport React, { useCallback, useState, useContext, useEffect } from 'react';\nimport { Form } from '@ant-design/compatible';\nimport { default as Router } from 'next/router';\nimport Link from 'next/link';\nimport { Helmet } from 'react-helmet';\nimport { Svg } from '@/assets/LoginSvg';\nimport { UserProvider } from '@/providers/user';\nimport { GlobalContext } from '@/context/global';\nimport style from './index.module.scss';\n\nvar _Login = function _Login(_ref) {\n  var form = _ref.form;\n  var getFieldDecorator = form.getFieldDecorator;\n  var globalContext = useContext(GlobalContext);\n\n  var _useState = useState(false),\n      loading = _useState[0],\n      setLoading = _useState[1];\n\n  useEffect(function () {\n    localStorage.clear();\n  }, []);\n  var submit = useCallback(function (e) {\n    e.preventDefault();\n    form.validateFields(function (err, values) {\n      if (!err) {\n        setLoading(true);\n        UserProvider.login(values).then(function (userInfo) {\n          localStorage.setItem('token', userInfo.token);\n          setLoading(false);\n          globalContext.setUser(userInfo);\n          globalContext.getSetting();\n          Router.push(Router.query.redirect || '/');\n        })[\"catch\"](function () {\n          return setLoading(false);\n        });\n      }\n    });\n  }, [form, globalContext]);\n  return __jsx(\"div\", {\n    className: style.wrapper\n  }, __jsx(Helmet, null, __jsx(\"title\", null, \"\\u7CFB\\u7EDF\\u767B\\u5F55\")), __jsx(_Row, {\n    className: style.container\n  }, __jsx(_Col, {\n    xs: 0,\n    sm: 0,\n    md: 12\n  }, __jsx(Svg, null)), __jsx(_Col, {\n    xs: 24,\n    sm: 24,\n    md: 12\n  }, __jsx(\"div\", {\n    style: {\n      width: '100%'\n    }\n  }, __jsx(\"h2\", null, \"\\u7CFB\\u7EDF\\u767B\\u5F55\"), __jsx(Form, {\n    layout: \"horizontal\",\n    onSubmit: submit\n  }, __jsx(Form.Item, {\n    label: \"\\u8D26\\u6237\"\n  }, getFieldDecorator('name', {\n    rules: [{\n      required: true,\n      message: '请输入用户名！'\n    }]\n  })(__jsx(_Input, {\n    placeholder: \"\\u8BF7\\u8F93\\u5165\\u7528\\u6237\\u540D\"\n  }))), __jsx(Form.Item, {\n    label: \"\\u5BC6\\u7801\"\n  }, getFieldDecorator('password', {\n    rules: [{\n      required: true,\n      message: '请输入密码！'\n    }]\n  })(__jsx(_Input, {\n    type: \"password\",\n    placeholder: \"\\u8BF7\\u8F93\\u5165\\u5BC6\\u7801\"\n  }))), __jsx(Form.Item, null, __jsx(_Button, {\n    type: \"primary\",\n    htmlType: \"submit\",\n    style: {\n      width: '100%'\n    },\n    loading: loading,\n    disabled: loading\n  }, \"\\u767B\\u5F55\"), \"Or\", ' ', __jsx(Link, {\n    href: \"/register\"\n  }, __jsx(\"a\", null, \"\\u6CE8\\u518C\\u7528\\u6237\"))))))), __jsx(\"ul\", {\n    className: style.bubbles\n  }, Array.from({\n    length: 10\n  }).map(function (_, idx) {\n    return __jsx(\"li\", {\n      key: idx\n    });\n  })));\n};\n\nexport default Form.create({\n  name: 'login'\n})(_Login);","map":null,"metadata":{},"sourceType":"module"}