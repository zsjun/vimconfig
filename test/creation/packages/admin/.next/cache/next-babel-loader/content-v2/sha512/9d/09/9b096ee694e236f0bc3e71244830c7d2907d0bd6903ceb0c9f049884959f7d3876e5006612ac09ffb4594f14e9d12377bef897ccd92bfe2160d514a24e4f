{"ast":null,"code":"import \"antd/lib/button/style\";\nimport _Button from \"antd/lib/button\";\nimport \"antd/lib/alert/style\";\nimport _Alert from \"antd/lib/alert\";\nimport \"antd/lib/message/style\";\nimport _message from \"antd/lib/message\";\nvar __jsx = React.createElement;\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { Form } from '@ant-design/compatible';\nimport { safeJsonParse } from '@/utils/json';\nimport { SettingProvider } from '@/providers/setting';\nimport { JsonEditor } from '@/components/JsonEditor';\nexport const OSSSetting = ({\n  setting\n}) => {\n  const {\n    0: oss,\n    1: setOss\n  } = useState({});\n  useEffect(() => {\n    setOss(safeJsonParse(setting.oss));\n  }, [setting.oss]);\n  const save = useCallback(() => {\n    const data = {\n      oss: JSON.stringify(oss)\n    };\n    SettingProvider.updateSetting(data).then(() => {\n      _message.success('保存成功');\n    });\n  }, [oss]);\n  return __jsx(Form, {\n    layout: \"vertical\"\n  }, __jsx(_Alert, {\n    message: \"\\u8BF4\\u660E\",\n    description: `请在编辑器中输入您的 oss 配置，并添加 type 字段区分 \\r\\n {\"type\":\"aliyun\",\"accessKeyId\":\"\",\"accessKeySecret\":\"\",\"bucket\":\"\",\"https\":true,\"region\":\"\"}`,\n    type: \"info\",\n    showIcon: true,\n    style: {\n      marginBottom: '1rem'\n    }\n  }), __jsx(JsonEditor, {\n    value: JSON.stringify(oss, null, 2),\n    onChange: setOss,\n    style: {\n      height: '400px',\n      overflow: 'hidden',\n      border: '1px solid var(--border-color)',\n      marginBottom: 24\n    }\n  }), __jsx(_Button, {\n    type: \"primary\",\n    onClick: save\n  }, \"\\u4FDD\\u5B58\"));\n};","map":null,"metadata":{},"sourceType":"module"}