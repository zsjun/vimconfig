{"ast":null,"code":"import \"antd/lib/button/style\";\nimport _Button from \"antd/lib/button\";\nimport \"antd/lib/input/style\";\nimport _Input from \"antd/lib/input\";\nimport \"antd/lib/message/style\";\nimport _message from \"antd/lib/message\";\nvar __jsx = React.createElement;\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { Form } from '@ant-design/compatible';\nimport { SettingProvider } from '@/providers/setting';\nimport { SMTPProvider } from '@/providers/smtp';\nexport var SMTPSetting = function SMTPSetting(_ref) {\n  var setting = _ref.setting;\n\n  var _useState = useState(null),\n      smtpHost = _useState[0],\n      setsmtpHost = _useState[1];\n\n  var _useState2 = useState(null),\n      smtpPort = _useState2[0],\n      setsmtpPort = _useState2[1];\n\n  var _useState3 = useState(null),\n      smtpUser = _useState3[0],\n      setsmtpUser = _useState3[1];\n\n  var _useState4 = useState(null),\n      smtpPass = _useState4[0],\n      setsmtpPass = _useState4[1];\n\n  var _useState5 = useState(null),\n      smtpFromUser = _useState5[0],\n      setSmtpFromUser = _useState5[1];\n\n  useEffect(function () {\n    setsmtpHost(setting && setting.smtpHost || null);\n    setsmtpPort(setting && setting.smtpPort || null);\n    setsmtpUser(setting && setting.smtpUser || null);\n    setsmtpPass(setting && setting.smtpPass || null);\n    setSmtpFromUser(setting && setting.smtpFromUser || null);\n  }, [setting]);\n\n  var save = function save() {\n    var data = {\n      smtpHost: smtpHost,\n      smtpPort: smtpPort,\n      smtpUser: smtpUser,\n      smtpPass: smtpPass,\n      smtpFromUser: smtpFromUser\n    };\n    SettingProvider.updateSetting(data).then(function () {\n      _message.success('保存成功');\n    });\n  };\n\n  var test = useCallback(function () {\n    SMTPProvider.testSendMail(smtpFromUser).then(function () {\n      _message.success('邮件发送成功');\n    })[\"catch\"](function () {\n      _message.error('邮件发送失败');\n    });\n  }, [smtpFromUser]);\n  return __jsx(Form, {\n    layout: \"vertical\"\n  }, __jsx(Form.Item, {\n    label: \"SMTP \\u5730\\u5740\"\n  }, __jsx(_Input, {\n    placeholder: \"\\u8BF7\\u8F93\\u5165SMTP\",\n    value: smtpHost,\n    onChange: function onChange(e) {\n      setsmtpHost(e.target.value);\n    }\n  })), __jsx(Form.Item, {\n    label: \"SMTP \\u7AEF\\u53E3\\uFF08\\u5F3A\\u5236\\u4F7F\\u7528 SSL \\u8FDE\\u63A5\\uFF09\"\n  }, __jsx(_Input, {\n    placeholder: \"\\u8BF7\\u8F93\\u5165SMTP \\u7AEF\\u53E3\",\n    value: smtpPort,\n    onChange: function onChange(e) {\n      setsmtpPort(e.target.value);\n    }\n  })), __jsx(Form.Item, {\n    label: \"SMTP \\u7528\\u6237\"\n  }, __jsx(_Input, {\n    placeholder: \"\\u8BF7\\u8F93\\u5165SMTP \\u7528\\u6237\",\n    value: smtpUser,\n    onChange: function onChange(e) {\n      setsmtpUser(e.target.value);\n    }\n  })), __jsx(Form.Item, {\n    label: \"SMTP \\u5BC6\\u7801\"\n  }, __jsx(_Input, {\n    placeholder: \"\\u4E5F\\u53EF\\u80FD\\u662F\\u6388\\u6743\\u7801\",\n    value: smtpPass,\n    onChange: function onChange(e) {\n      setsmtpPass(e.target.value);\n    }\n  })), __jsx(Form.Item, {\n    label: \"\\u53D1\\u4EF6\\u4EBA\"\n  }, __jsx(_Input, {\n    placeholder: \"\\u8BF7\\u8F93\\u5165\\u6B63\\u786E\\u7684\\u90AE\\u7BB1\\u5730\\u5740\",\n    value: smtpFromUser,\n    onChange: function onChange(e) {\n      setSmtpFromUser(e.target.value);\n    }\n  })), __jsx(_Button, {\n    type: \"primary\",\n    onClick: save\n  }, \"\\u4FDD\\u5B58\"), __jsx(_Button, {\n    style: {\n      marginLeft: 16\n    },\n    onClick: test\n  }, \"\\u6D4B\\u8BD5\"));\n};","map":null,"metadata":{},"sourceType":"module"}