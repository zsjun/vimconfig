{"ast":null,"code":"import \"antd/lib/upload/style\";\nimport _Upload from \"antd/lib/upload\";\nimport \"antd/lib/tooltip/style\";\nimport _Tooltip from \"antd/lib/tooltip\";\nimport \"antd/lib/message/style\";\nimport _message from \"antd/lib/message\";\nvar __jsx = React.createElement;\nimport React from 'react';\nimport { FileProvider } from '@/providers/file';\nimport { monaco } from '../MonacoEditor';\nexport const Image = ({\n  editor\n}) => {\n  const uploadProps = {\n    name: 'file',\n    accept: `.jpg, .jpeg, .pjpeg, .png, .apng, .bmp, .gif, .svg, .webp`,\n    multiple: false,\n    showUploadList: false,\n    action: '',\n\n    beforeUpload(file) {\n      const hide = _message.loading('图片上传中...', 0);\n\n      FileProvider.uploadFile(file).then(res => {\n        _message.success('上传成功');\n\n        const result = `![${res.filename}](${res.url})`;\n        const p = editor.getPosition();\n        editor.executeEdits('', [{\n          range: new monaco.Range(p.lineNumber, p.column, p.lineNumber, p.column),\n          text: result\n        }]);\n        hide();\n      }).catch(() => {\n        _message.error('上传失败');\n\n        hide();\n      });\n      return Promise.reject(new Error('canceld'));\n    }\n\n  };\n  return __jsx(_Upload, uploadProps, __jsx(_Tooltip, {\n    title: '上传图片'\n  }, __jsx(\"svg\", {\n    viewBox: \"0 0 24 24\",\n    width: \"16px\",\n    height: \"16px\",\n    style: {\n      marginTop: 6\n    }\n  }, __jsx(\"path\", {\n    fillRule: \"evenodd\",\n    fill: \"currentColor\",\n    d: \"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z\"\n  }))));\n};","map":null,"metadata":{},"sourceType":"module"}