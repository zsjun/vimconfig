{"code":"_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[26,14],{\"63sL\":function(e,t,a){\"use strict\";a.r(t);var n=a(\"o0o1\"),r=a.n(n),c=a(\"HaE+\"),i=(a(\"fwXI\"),a(\"CC+v\")),l=a.n(i),s=(a(\"nTym\"),a(\"qu0K\")),o=a.n(s),u=(a(\"cUip\"),a(\"iJl9\")),d=a.n(u),m=(a(\"tL+A\"),a(\"QpBz\")),p=a.n(m),f=a(\"q1tI\"),v=a.n(f),b=a(\"TJpk\"),h=a(\"20a2\"),g=a.n(h),w=a(\"YFqc\"),y=a.n(w),N=a(\"Az7S\"),O=a(\"Zjvm\"),j={icon:{tag:\"svg\",attrs:{viewBox:\"64 64 896 896\",focusable:\"false\"},children:[{tag:\"path\",attrs:{d:\"M938 458.8l-29.6-312.6c-1.5-16.2-14.4-29-30.6-30.6L565.2 86h-.4c-3.2 0-5.7 1-7.6 2.9L88.9 557.2a9.96 9.96 0 000 14.1l363.8 363.8c1.9 1.9 4.4 2.9 7.1 2.9s5.2-1 7.1-2.9l468.3-468.3c2-2.1 3-5 2.8-8zM459.7 834.7L189.3 564.3 589 164.6 836 188l23.4 247-399.7 399.7zM680 256c-48.5 0-88 39.5-88 88s39.5 88 88 88 88-39.5 88-88-39.5-88-88-88zm0 120c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z\"}}]},name:\"tag\",theme:\"outlined\"},k=a(\"6VBw\"),P=function(e,t){return f.createElement(k.a,Object(O.a)(Object(O.a)({},e),{},{ref:t,icon:j}))};P.displayName=\"TagOutlined\";var A=f.forwardRef(P),E=a(\"gFb0\"),C=a(\"zRT3\"),I=a(\"hfvm\"),_=a(\"JMli\"),L=a(\"GvOY\"),T=a(\"cor7\"),x=a(\"PzmL\"),z=a(\"wFKl\"),S=a(\"yySa\"),M=a(\"5MOb\"),W=a.n(M),B=v.a.createElement,H=a(\"QmWs\"),J=function(e){var t=e.article,a=Object(N.b)(),n=Object(f.useContext)(E.a).setting,r=Object(f.useRef)(null),c=Object(f.useState)(t&&t.needPassword),i=c[0],s=c[1],u=Object(f.useState)(t&&t.totalAmount&&!t.isPay),m=u[0],h=(u[1],t&&t.toc?JSON.parse(t.toc):[]),w=Object(f.useCallback)((function(){I.a.checkPassword(t.id,r.current).then((function(e){e.pass?(Object.assign(t,e),s(!1)):(p.a.error(a(\"wrongPasswd\")),s(!0))}))}),[a,t]),O=Object(f.useCallback)((function(){g.a.push(\"/\")}),[]),j=B(l.a,{title:a(\"protectedArticleMsg\"),cancelText:a(\"backHome\"),okText:a(\"confirm\"),visible:i,onOk:w,onCancel:O},B(o.a.Item,{label:a(\"passwd\")},B(d.a.Password,{onChange:function(e){r.current=e.target.value}})));Object(f.useEffect)((function(){s(t&&t.needPassword)}),[t]),Object(f.useEffect)((function(){i||I.a.updateArticleViews(t.id)}),[i,t]);var k=B(v.a.Fragment,null,j,B(b.Helmet,null,B(\"title\",null,(t.title||a(\"unknownTitle\"))+\" | \"+n.systemTitle)),B(L.a,{containerSelector:\"#js-article-wrapper\"},B(\"article\",{id:\"js-article-wrapper\",className:W.a.articleWrap},n.systemUrl&&B(\"meta\",{itemProp:\"url\",content:H.resolve(n.systemUrl,\"/article/\".concat(t.id))}),B(\"meta\",{itemProp:\"headline\",content:t.title}),t.tags&&B(\"meta\",{itemProp:\"keywords\",content:t.tags.map((function(e){return e.label})).join(\" \")}),B(\"meta\",{itemProp:\"dataPublished\",content:t.publishAt}),t.cover&&B(\"meta\",{itemProp:\"image\",content:t.cover}),t.cover&&B(\"div\",{className:W.a.coverWrapper},B(\"img\",{src:t.cover,alt:a(\"articleCover\")})),B(\"div\",{className:W.a.metaInfoWrap},B(\"h1\",{className:W.a.title},t.title),B(\"p\",{className:W.a.desc},B(\"span\",null,a(\"publishAt\"),B(_.a,{date:t.publishAt})),B(\"span\",null,\" \\u2022 \"),B(\"span\",null,a(\"readings\"),\" \",t.views))),B(z.a,{content:t.html}),B(\"div\",{className:W.a.footerInfoWrap},B(\"div\",{className:W.a.copyrightInfo},a(\"publishAt\"),B(_.a,{date:t.publishAt}),\" | \",a(\"copyrightInfo\"),\"\\uff1a\",B(\"a\",{href:\"https://creativecommons.org/licenses/by-nc/3.0/cn/deed.zh\",target:\"_blank\",rel:\"noreferrer\"},a(\"copyrightContent\"))),t.tags&&t.tags.length?B(\"div\",{className:W.a.tagsWrap},t.tags.map((function(e){return B(\"div\",{className:W.a.tagWrapper,key:e.id},B(\"div\",{className:W.a.tag},B(y.a,{href:\"/tag/[tag]\",as:\"/tag/\"+e.value,scroll:!1},B(\"a\",null,B(A,null),B(\"span\",null,e.label)))))}))):null)),t.isCommentable&&B(\"div\",{className:W.a.commentWrap},B(\"p\",{className:W.a.title},a(\"comment\")),B(T.b,{key:t.id,hostId:t.id})))),P=B(\"div\",{className:\"sticky\"},B(x.a,{articleId:t.id,mode:\"inline\"}),h&&h.length?B(S.a,{key:t.id,tocs:h,maxHeight:\"80vh\"}):null);return B(C.a,{leftNode:k,rightNode:P,likesProps:{defaultCount:t.likes,id:t.id,api:function(e,t){return I.a.updateArticleLikes(e,t).then((function(e){return e.likes}))}},showComment:t.isCommentable,shareProps:i?null:{cover:t.cover,title:t.title,desc:t.summary,url:\"/article/\".concat(t.id)},showPay:m?{id:t.id,totalAmount:t.totalAmount}:null})};J.getInitialProps=function(){var e=Object(c.a)(r.a.mark((function e(t){var a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.query.id,e.next=3,I.a.getArticle(a);case 3:return n=e.sent,e.abrupt(\"return\",{article:n});case 5:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.default=J},NBH1:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/article/[id]\",function(){return a(\"63sL\")}])},yySa:function(e,t,a){\"use strict\";a.d(t,\"a\",(function(){return p}));var n=a(\"q1tI\"),r=a.n(n),c=a(\"TSYQ\"),i=a.n(c),l=a(\"Az7S\"),s=a(\"MLMA\"),o=a(\"d/kO\"),u=a(\"bybV\"),d=a.n(u),m=r.a.createElement,p=function(e){var t=e.tocs,a=void 0===t?[]:t,r=Object(l.b)(),c=Object(n.useRef)(),u=Object(n.useState)(0),p=u[0],f=u[1],v=Object(n.useCallback)((function(e){try{var t=document.getElementById(e.id);t&&t.scrollIntoView()}catch(a){}}),[]);return Object(n.useEffect)((function(){var e=function(){a.reduceRight((function(e,t,a){var n=document.getElementById(t.id);return n?(Object(s.b)(n)&&(f(a),c.current.scrollTop=32*a),e):e}),null)};return document.addEventListener(\"scroll\",e),function(){document.removeEventListener(\"scroll\",e)}}),[a]),m(\"div\",{className:d.a.wrapper},m(\"header\",null,r(\"toc\")),m(\"main\",null,m(\"div\",{ref:c},m(\"div\",null,m(o.a,{length:a.length,options:{opacity:1,height:32,from:{opacity:0,height:0}},element:\"div\",renderItem:function(e){var t=a[e],n=t.level,r=Object(s.e)(n-1);return m(\"div\",{className:i()(d.a.item,e===p&&d.a.active),style:{paddingLeft:12*(n-1),cursor:\"pointer\",\"--dot-left\":10*(n-2)+\"px\",\"--dot-width\":6-(n-1)+(r?1:0)+\"px\"},onClick:function(){return v(t)}},m(\"div\",null,t.text))}}),m(\"div\",{className:d.a.indicator,style:{top:32*p+\"px\"}})))))}}},[[\"NBH1\",1,2,0,3,4,5,7,8,9,10,11,12,13,15,16,6]]]);","map":{"version":3,"sources":["static/chunks/pages/article/[id]-26c83024d53d9ba234fc.js"],"names":["_N_E","window","push","63sL","module","__webpack_exports__","__webpack_require__","r","regenerator","regenerator_default","n","asyncToGenerator","modal","modal_default","lib_form","form_default","input","input_default","message","message_default","react","react_default","Helmet","router","router_default","next_link","link_default","use_intl_esm","objectSpread2","asn_TagOutlined","icon","tag","attrs","viewBox","focusable","children","d","name","theme","AntdIcon","icons_TagOutlined_TagOutlined","props","ref","Object","displayName","icons_TagOutlined","global","DoubleColumnLayout","providers_article","LocaleTime","ImageViewer","Comment","ArticleRecommend","MarkdownReader","Toc","index_module","index_module_default","__jsx","a","createElement","url","_id_Article","_ref","article","t","setting","passwdRef","_useState","needPassword","shouldCheckPassWord","setShouldCheckPassword","_useState2","totalAmount","isPay","shouldCheckPay","tocs","toc","JSON","parse","checkPassWord","checkPassword","id","current","then","res","pass","assign","error","back","checkPassWordModal","title","cancelText","okText","visible","onOk","onCancel","Item","label","Password","onChange","e","target","value","updateArticleViews","Content","Fragment","systemTitle","containerSelector","className","articleWrap","systemUrl","itemProp","content","resolve","concat","tags","map","join","publishAt","cover","coverWrapper","src","alt","metaInfoWrap","desc","date","views","html","footerInfoWrap","copyrightInfo","href","rel","length","tagsWrap","tagWrapper","key","as","scroll","isCommentable","commentWrap","hostId","Aside","articleId","mode","maxHeight","leftNode","rightNode","likesProps","defaultCount","likes","api","type","updateArticleLikes","showComment","shareProps","summary","showPay","getInitialProps","_ref2","mark","_callee","ctx","wrap","_context","prev","next","query","getArticle","sent","abrupt","stop","_x","apply","this","arguments","NBH1","exports","__NEXT_P","yySa","react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_0___default","classnames__WEBPACK_IMPORTED_MODULE_1__","classnames__WEBPACK_IMPORTED_MODULE_1___default","next_intl__WEBPACK_IMPORTED_MODULE_2__","_utils__WEBPACK_IMPORTED_MODULE_3__","_components_Animation_Trail__WEBPACK_IMPORTED_MODULE_4__","_index_module_scss__WEBPACK_IMPORTED_MODULE_5__","_index_module_scss__WEBPACK_IMPORTED_MODULE_5___default","_ref$tocs","active","setActive","_goto","el","document","getElementById","scrollIntoView","listener","reduceRight","_","index","scrollTop","addEventListener","removeEventListener","wrapper","options","opacity","height","from","element","renderItem","idx","v","level","f","item","style","paddingLeft","cursor","--dot-left","--dot-width","onClick","text","indicator","top"],"mappings":"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"},"name":"static/chunks/pages/article/[id]-26c83024d53d9ba234fc.js","input":"_N_E =\n(window[\"webpackJsonp_N_E\"] = window[\"webpackJsonp_N_E\"] || []).push([[26,14],{\n\n/***/ \"63sL\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/regenerator/index.js\nvar regenerator = __webpack_require__(\"o0o1\");\nvar regenerator_default = /*#__PURE__*/__webpack_require__.n(regenerator);\n\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\nvar asyncToGenerator = __webpack_require__(\"HaE+\");\n\n// EXTERNAL MODULE: ./node_modules/antd/lib/modal/style/index.js\nvar style = __webpack_require__(\"fwXI\");\n\n// EXTERNAL MODULE: ./node_modules/antd/lib/modal/index.js\nvar modal = __webpack_require__(\"CC+v\");\nvar modal_default = /*#__PURE__*/__webpack_require__.n(modal);\n\n// EXTERNAL MODULE: ./node_modules/antd/lib/form/style/index.js\nvar form_style = __webpack_require__(\"nTym\");\n\n// EXTERNAL MODULE: ./node_modules/antd/lib/form/index.js\nvar lib_form = __webpack_require__(\"qu0K\");\nvar form_default = /*#__PURE__*/__webpack_require__.n(lib_form);\n\n// EXTERNAL MODULE: ./node_modules/antd/lib/input/style/index.js\nvar input_style = __webpack_require__(\"cUip\");\n\n// EXTERNAL MODULE: ./node_modules/antd/lib/input/index.js\nvar input = __webpack_require__(\"iJl9\");\nvar input_default = /*#__PURE__*/__webpack_require__.n(input);\n\n// EXTERNAL MODULE: ./node_modules/antd/lib/message/style/index.js\nvar message_style = __webpack_require__(\"tL+A\");\n\n// EXTERNAL MODULE: ./node_modules/antd/lib/message/index.js\nvar message = __webpack_require__(\"QpBz\");\nvar message_default = /*#__PURE__*/__webpack_require__.n(message);\n\n// EXTERNAL MODULE: ./node_modules/react/index.js\nvar react = __webpack_require__(\"q1tI\");\nvar react_default = /*#__PURE__*/__webpack_require__.n(react);\n\n// EXTERNAL MODULE: ./node_modules/react-helmet/lib/Helmet.js\nvar Helmet = __webpack_require__(\"TJpk\");\n\n// EXTERNAL MODULE: ./node_modules/next/router.js\nvar router = __webpack_require__(\"20a2\");\nvar router_default = /*#__PURE__*/__webpack_require__.n(router);\n\n// EXTERNAL MODULE: ./node_modules/next/link.js\nvar next_link = __webpack_require__(\"YFqc\");\nvar link_default = /*#__PURE__*/__webpack_require__.n(next_link);\n\n// EXTERNAL MODULE: ./node_modules/use-intl/dist/use-intl.esm.js + 19 modules\nvar use_intl_esm = __webpack_require__(\"Az7S\");\n\n// EXTERNAL MODULE: ./node_modules/@ant-design/icons/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\nvar objectSpread2 = __webpack_require__(\"Zjvm\");\n\n// CONCATENATED MODULE: ./node_modules/@ant-design/icons-svg/es/asn/TagOutlined.js\n// This icon file is generated automatically.\nvar TagOutlined_TagOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M938 458.8l-29.6-312.6c-1.5-16.2-14.4-29-30.6-30.6L565.2 86h-.4c-3.2 0-5.7 1-7.6 2.9L88.9 557.2a9.96 9.96 0 000 14.1l363.8 363.8c1.9 1.9 4.4 2.9 7.1 2.9s5.2-1 7.1-2.9l468.3-468.3c2-2.1 3-5 2.8-8zM459.7 834.7L189.3 564.3 589 164.6 836 188l23.4 247-399.7 399.7zM680 256c-48.5 0-88 39.5-88 88s39.5 88 88 88 88-39.5 88-88-39.5-88-88-88zm0 120c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z\" } }] }, \"name\": \"tag\", \"theme\": \"outlined\" };\n/* harmony default export */ var asn_TagOutlined = (TagOutlined_TagOutlined);\n\n// EXTERNAL MODULE: ./node_modules/@ant-design/icons/es/components/AntdIcon.js + 8 modules\nvar AntdIcon = __webpack_require__(\"6VBw\");\n\n// CONCATENATED MODULE: ./node_modules/@ant-design/icons/es/icons/TagOutlined.js\n\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\n\n\n\n\nvar icons_TagOutlined_TagOutlined = function TagOutlined(props, ref) {\n  return /*#__PURE__*/react[\"createElement\"](AntdIcon[\"a\" /* default */], Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({}, props), {}, {\n    ref: ref,\n    icon: asn_TagOutlined\n  }));\n};\n\nicons_TagOutlined_TagOutlined.displayName = 'TagOutlined';\n/* harmony default export */ var icons_TagOutlined = (/*#__PURE__*/react[\"forwardRef\"](icons_TagOutlined_TagOutlined));\n// EXTERNAL MODULE: ./src/context/global.tsx\nvar global = __webpack_require__(\"gFb0\");\n\n// EXTERNAL MODULE: ./src/layout/DoubleColumnLayout/index.tsx + 4 modules\nvar DoubleColumnLayout = __webpack_require__(\"zRT3\");\n\n// EXTERNAL MODULE: ./src/providers/article.ts\nvar providers_article = __webpack_require__(\"hfvm\");\n\n// EXTERNAL MODULE: ./src/components/LocaleTime.tsx + 52 modules\nvar LocaleTime = __webpack_require__(\"JMli\");\n\n// EXTERNAL MODULE: ./src/components/ImageViewer/index.tsx\nvar ImageViewer = __webpack_require__(\"GvOY\");\n\n// EXTERNAL MODULE: ./src/components/Comment/index.tsx + 10 modules\nvar Comment = __webpack_require__(\"cor7\");\n\n// EXTERNAL MODULE: ./src/components/ArticleRecommend/index.tsx\nvar ArticleRecommend = __webpack_require__(\"PzmL\");\n\n// EXTERNAL MODULE: ./src/components/MarkdownReader/index.tsx + 1 modules\nvar MarkdownReader = __webpack_require__(\"wFKl\");\n\n// EXTERNAL MODULE: ./src/components/Toc/index.tsx\nvar Toc = __webpack_require__(\"yySa\");\n\n// EXTERNAL MODULE: ./pages/article/index.module.scss\nvar index_module = __webpack_require__(\"5MOb\");\nvar index_module_default = /*#__PURE__*/__webpack_require__.n(index_module);\n\n// CONCATENATED MODULE: ./pages/article/[id].tsx\n\n\n\n\n\n\n\n\n\n\nvar __jsx = react_default.a.createElement;\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar url = __webpack_require__(\"QmWs\");\n\nvar _id_Article = function Article(_ref) {\n  var article = _ref.article;\n  var t = Object(use_intl_esm[\"b\" /* useTranslations */])();\n\n  var _useContext = Object(react[\"useContext\"])(global[\"a\" /* GlobalContext */]),\n      setting = _useContext.setting;\n\n  var passwdRef = Object(react[\"useRef\"])(null);\n\n  var _useState = Object(react[\"useState\"])(article && article.needPassword),\n      shouldCheckPassWord = _useState[0],\n      setShouldCheckPassword = _useState[1];\n\n  var _useState2 = Object(react[\"useState\"])(article && article.totalAmount && !article.isPay),\n      shouldCheckPay = _useState2[0],\n      setShouldCheckPay = _useState2[1]; // const [shouldCheckPay, setShouldCheckPay] = useState(true);\n\n\n  var tocs = article && article.toc ? JSON.parse(article.toc) : []; // 检查文章密码\n\n  var checkPassWord = Object(react[\"useCallback\"])(function () {\n    providers_article[\"a\" /* ArticleProvider */].checkPassword(article.id, passwdRef.current).then(function (res) {\n      if (res.pass) {\n        Object.assign(article, res);\n        setShouldCheckPassword(false);\n      } else {\n        message_default.a.error(t('wrongPasswd'));\n\n        setShouldCheckPassword(true);\n      }\n    });\n  }, [t, article]); // 发起支付\n\n  var back = Object(react[\"useCallback\"])(function () {\n    router_default.a.push('/');\n  }, []);\n\n  var checkPassWordModal = __jsx(modal_default.a, {\n    title: t('protectedArticleMsg'),\n    cancelText: t('backHome'),\n    okText: t('confirm'),\n    visible: shouldCheckPassWord,\n    onOk: checkPassWord,\n    onCancel: back\n  }, __jsx(form_default.a.Item, {\n    label: t('passwd')\n  }, __jsx(input_default.a.Password, {\n    onChange: function onChange(e) {\n      passwdRef.current = e.target.value;\n    }\n  })));\n\n  Object(react[\"useEffect\"])(function () {\n    setShouldCheckPassword(article && article.needPassword);\n  }, [article]); // 更新阅读量\n\n  Object(react[\"useEffect\"])(function () {\n    if (!shouldCheckPassWord) {\n      providers_article[\"a\" /* ArticleProvider */].updateArticleViews(article.id);\n    }\n  }, [shouldCheckPassWord, article]);\n\n  var Content = __jsx(react_default.a.Fragment, null, checkPassWordModal, __jsx(Helmet[\"Helmet\"], null, __jsx(\"title\", null, (article.title || t('unknownTitle')) + ' | ' + setting.systemTitle)), __jsx(ImageViewer[\"a\" /* ImageViewer */], {\n    containerSelector: \"#js-article-wrapper\"\n  }, __jsx(\"article\", {\n    id: \"js-article-wrapper\",\n    className: index_module_default.a.articleWrap\n  }, setting.systemUrl && __jsx(\"meta\", {\n    itemProp: \"url\",\n    content: url.resolve(setting.systemUrl, \"/article/\".concat(article.id))\n  }), __jsx(\"meta\", {\n    itemProp: \"headline\",\n    content: article.title\n  }), article.tags && __jsx(\"meta\", {\n    itemProp: \"keywords\",\n    content: article.tags.map(function (tag) {\n      return tag.label;\n    }).join(' ')\n  }), __jsx(\"meta\", {\n    itemProp: \"dataPublished\",\n    content: article.publishAt\n  }), article.cover && __jsx(\"meta\", {\n    itemProp: \"image\",\n    content: article.cover\n  }), article.cover && __jsx(\"div\", {\n    className: index_module_default.a.coverWrapper\n  }, __jsx(\"img\", {\n    src: article.cover,\n    alt: t('articleCover')\n  })), __jsx(\"div\", {\n    className: index_module_default.a.metaInfoWrap\n  }, __jsx(\"h1\", {\n    className: index_module_default.a.title\n  }, article.title), __jsx(\"p\", {\n    className: index_module_default.a.desc\n  }, __jsx(\"span\", null, t('publishAt'), __jsx(LocaleTime[\"a\" /* LocaleTime */], {\n    date: article.publishAt\n  })), __jsx(\"span\", null, \" \\u2022 \"), __jsx(\"span\", null, t('readings'), \" \", article.views))), __jsx(MarkdownReader[\"a\" /* MarkdownReader */], {\n    content: article.html\n  }), __jsx(\"div\", {\n    className: index_module_default.a.footerInfoWrap\n  }, __jsx(\"div\", {\n    className: index_module_default.a.copyrightInfo\n  }, t('publishAt'), __jsx(LocaleTime[\"a\" /* LocaleTime */], {\n    date: article.publishAt\n  }), \" | \", t('copyrightInfo'), \"\\uFF1A\", __jsx(\"a\", {\n    href: \"https://creativecommons.org/licenses/by-nc/3.0/cn/deed.zh\",\n    target: \"_blank\",\n    rel: \"noreferrer\"\n  }, t('copyrightContent'))), article.tags && article.tags.length ? __jsx(\"div\", {\n    className: index_module_default.a.tagsWrap\n  }, article.tags.map(function (tag) {\n    return __jsx(\"div\", {\n      className: index_module_default.a.tagWrapper,\n      key: tag.id\n    }, __jsx(\"div\", {\n      className: index_module_default.a.tag\n    }, __jsx(link_default.a, {\n      href: '/tag/[tag]',\n      as: '/tag/' + tag.value,\n      scroll: false\n    }, __jsx(\"a\", null, __jsx(icons_TagOutlined, null), __jsx(\"span\", null, tag.label)))));\n  })) : null)), article.isCommentable && __jsx(\"div\", {\n    className: index_module_default.a.commentWrap\n  }, __jsx(\"p\", {\n    className: index_module_default.a.title\n  }, t('comment')), __jsx(Comment[\"b\" /* Comment */], {\n    key: article.id,\n    hostId: article.id\n  }))));\n\n  var Aside = __jsx(\"div\", {\n    className: 'sticky'\n  }, __jsx(ArticleRecommend[\"a\" /* ArticleRecommend */], {\n    articleId: article.id,\n    mode: \"inline\"\n  }), tocs && tocs.length ? __jsx(Toc[\"a\" /* Toc */], {\n    key: article.id,\n    tocs: tocs,\n    maxHeight: '80vh'\n  }) : null);\n\n  return __jsx(DoubleColumnLayout[\"a\" /* DoubleColumnLayout */], {\n    leftNode: Content,\n    rightNode: Aside,\n    likesProps: {\n      defaultCount: article.likes,\n      id: article.id,\n      api: function api(id, type) {\n        return providers_article[\"a\" /* ArticleProvider */].updateArticleLikes(id, type).then(function (res) {\n          return res.likes;\n        });\n      }\n    },\n    showComment: article.isCommentable,\n    shareProps: shouldCheckPassWord ? null : {\n      cover: article.cover,\n      title: article.title,\n      desc: article.summary,\n      url: \"/article/\".concat(article.id)\n    },\n    showPay: shouldCheckPay ? {\n      id: article.id,\n      totalAmount: article.totalAmount\n    } : null\n  });\n};\n\n_id_Article.getInitialProps = /*#__PURE__*/function () {\n  var _ref2 = Object(asyncToGenerator[\"a\" /* default */])( /*#__PURE__*/regenerator_default.a.mark(function _callee(ctx) {\n    var id, article;\n    return regenerator_default.a.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            id = ctx.query.id;\n            _context.next = 3;\n            return providers_article[\"a\" /* ArticleProvider */].getArticle(id);\n\n          case 3:\n            article = _context.sent;\n            return _context.abrupt(\"return\", {\n              article: article\n            });\n\n          case 5:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function (_x) {\n    return _ref2.apply(this, arguments);\n  };\n}();\n\n/* harmony default export */ var _id_ = __webpack_exports__[\"default\"] = (_id_Article);\n\n/***/ }),\n\n/***/ \"NBH1\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/article/[id]\",\n      function () {\n        return __webpack_require__(\"63sL\");\n      }\n    ]);\n  \n\n/***/ }),\n\n/***/ \"yySa\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return Toc; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"TSYQ\");\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var next_intl__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"Az7S\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"MLMA\");\n/* harmony import */ var _components_Animation_Trail__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"d/kO\");\n/* harmony import */ var _index_module_scss__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"bybV\");\n/* harmony import */ var _index_module_scss__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_index_module_scss__WEBPACK_IMPORTED_MODULE_5__);\nvar __jsx = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement;\n\n\n\n\n\n\nvar HEIGHT = 32;\nvar Toc = function Toc(_ref) {\n  var _ref$tocs = _ref.tocs,\n      tocs = _ref$tocs === void 0 ? [] : _ref$tocs;\n  var t = Object(next_intl__WEBPACK_IMPORTED_MODULE_2__[/* useTranslations */ \"b\"])();\n  var ref = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])();\n\n  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(0),\n      active = _useState[0],\n      setActive = _useState[1];\n\n  var _goto = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useCallback\"])(function (toc) {\n    try {\n      var el = document.getElementById(toc.id);\n\n      if (el) {\n        el.scrollIntoView();\n      }\n    } catch (e) {} // eslint-disable-line no-empty\n\n  }, []);\n\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(function () {\n    var listener = function listener() {\n      tocs.reduceRight(function (_, toc, index) {\n        var el = document.getElementById(toc.id);\n\n        if (!el) {\n          return _;\n        }\n\n        if (Object(_utils__WEBPACK_IMPORTED_MODULE_3__[/* elementInViewport */ \"b\"])(el)) {\n          setActive(index);\n          ref.current.scrollTop = HEIGHT * index;\n        }\n\n        return _;\n      }, null);\n    };\n\n    document.addEventListener('scroll', listener);\n    return function () {\n      document.removeEventListener('scroll', listener);\n    };\n  }, [tocs]);\n  return __jsx(\"div\", {\n    className: _index_module_scss__WEBPACK_IMPORTED_MODULE_5___default.a.wrapper\n  }, __jsx(\"header\", null, t('toc')), __jsx(\"main\", null, __jsx(\"div\", {\n    ref: ref\n  }, __jsx(\"div\", null, __jsx(_components_Animation_Trail__WEBPACK_IMPORTED_MODULE_4__[/* ListTrail */ \"a\"], {\n    length: tocs.length,\n    options: {\n      opacity: 1,\n      height: 32,\n      from: {\n        opacity: 0,\n        height: 0\n      }\n    },\n    element: 'div',\n    renderItem: function renderItem(idx) {\n      var toc = tocs[idx];\n      var v = toc.level;\n      var f = Object(_utils__WEBPACK_IMPORTED_MODULE_3__[/* isOdd */ \"e\"])(v - 1);\n      return __jsx(\"div\", {\n        className: classnames__WEBPACK_IMPORTED_MODULE_1___default()(_index_module_scss__WEBPACK_IMPORTED_MODULE_5___default.a.item, idx === active && _index_module_scss__WEBPACK_IMPORTED_MODULE_5___default.a.active),\n        style: {\n          'paddingLeft': 12 * (v - 1),\n          'cursor': 'pointer',\n          '--dot-left': 10 * (v - 2) + 'px',\n          '--dot-width': 6 - (v - 1) + (f ? 1 : 0) + 'px'\n        },\n        onClick: function onClick() {\n          return _goto(toc);\n        }\n      }, __jsx(\"div\", null, toc.text));\n    }\n  }), __jsx(\"div\", {\n    className: _index_module_scss__WEBPACK_IMPORTED_MODULE_5___default.a.indicator,\n    style: {\n      top: HEIGHT * active + 'px'\n    }\n  })))));\n};\n\n/***/ })\n\n},[[\"NBH1\",1,2,0,3,4,5,7,8,9,10,11,12,13,15,16,6]]]);","inputSourceMap":{"version":3,"sources":["/Users/zsj/work/vimconfig/test/creation/packages/client/node_modules/@ant-design/icons-svg/es/asn/TagOutlined.js","/Users/zsj/work/vimconfig/test/creation/packages/client/node_modules/@ant-design/icons/es/icons/TagOutlined.js","/Users/zsj/work/vimconfig/test/creation/packages/client/node_modules/next/dist/build/webpack/loaders/next-babel-loader.js??ref--4!/Users/zsj/work/vimconfig/test/creation/packages/client/pages/article/[id].tsx","/Users/zsj/work/vimconfig/test/creation/packages/client/node_modules/next/dist/build/webpack/loaders/next-client-pages-loader.js?page=%2Farticle%2F%5Bid%5D&absolutePagePath=private-next-pages%2Farticle%2F%5Bid%5D.tsx!","/Users/zsj/work/vimconfig/test/creation/packages/client/node_modules/next/dist/build/webpack/loaders/next-babel-loader.js??ref--4!/Users/zsj/work/vimconfig/test/creation/packages/client/src/components/Toc/index.tsx"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA,IAAI,uBAAW,IAAI,UAAU,yBAAyB,mDAAmD,gBAAgB,0BAA0B,6ZAA6Z,EAAE,GAAG;AACtiB,2EAAW,EAAC;;;;;;ACF0C;AACrE;AACA;AAC+B;AACuC;AACxB;;AAE9C,IAAI,6BAAW;AACf,sBAAsB,sBAAmB,CAAC,2BAAQ,EAAE,wCAAa,CAAC,wCAAa,GAAG,YAAY;AAC9F;AACA,UAAU,eAAc;AACxB,GAAG;AACH;;AAEA,6BAAW;AACiB,sFAAgB,CAAC,6BAAW,CAAC,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACfyE;AACe;AACnH;AACM;AACP;AACK;AACJ;AACM;AACJ;AACQ;AACxC,YAAY,eAAK;AACmE;AAC9C;AACU;AACnB;AACe;AACI;AACC;AACgB;AACX;AACD;AACE;AACR;AACkB;AACJ;AACtB;AACC;;AAExC,UAAU,mBAAO,CAAC,MAAK;;AAEvB,IAAI,WAAO;AACX;AACA,UAAU,+CAAe;;AAEzB,oBAAoB,2BAAU,CAAC,+BAAa;AAC5C;;AAEA,kBAAkB,uBAAM;;AAExB,kBAAkB,yBAAQ;AAC1B;AACA;;AAEA,mBAAmB,yBAAQ;AAC3B;AACA,wCAAwC;;;AAGxC,mEAAmE;;AAEnE,sBAAsB,4BAAW;AACjC,IAAI,4CAAe;AACnB;AACA;AACA;AACA,OAAO;AACP,QAAQ,iBAAQ;;AAEhB;AACA;AACA,KAAK;AACL,GAAG,gBAAgB;;AAEnB,aAAa,4BAAW;AACxB,IAAI,gBAAM;AACV,GAAG;;AAEH,iCAAiC,eAAM;AACvC;AACA;AACA;AACA;AACA;AACA;AACA,GAAG,QAAQ,cAAK;AAChB;AACA,GAAG,QAAQ,eAAM;AACjB;AACA;AACA;AACA,GAAG;;AAEH,EAAE,0BAAS;AACX;AACA,GAAG,aAAa;;AAEhB,EAAE,0BAAS;AACX;AACA,MAAM,4CAAe;AACrB;AACA,GAAG;;AAEH,sBAAsB,eAAK,2CAA2C,gBAAM,yGAAyG,kCAAW;AAChM;AACA,GAAG;AACH;AACA,eAAe,sBAAK;AACpB,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH,eAAe,sBAAK;AACpB,GAAG;AACH;AACA;AACA,GAAG;AACH,eAAe,sBAAK;AACpB,GAAG;AACH,eAAe,sBAAK;AACpB,GAAG;AACH,eAAe,sBAAK;AACpB,GAAG,4CAA4C,gCAAU;AACzD;AACA,GAAG,qGAAqG,wCAAc;AACtH;AACA,GAAG;AACH,eAAe,sBAAK;AACpB,GAAG;AACH,eAAe,sBAAK;AACpB,GAAG,wBAAwB,gCAAU;AACrC;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH,eAAe,sBAAK;AACpB,GAAG;AACH;AACA,iBAAiB,sBAAK;AACtB;AACA,KAAK;AACL,iBAAiB,sBAAK;AACtB,KAAK,QAAQ,cAAI;AACjB;AACA;AACA;AACA,KAAK,yBAAyB,iBAAW;AACzC,GAAG;AACH,eAAe,sBAAK;AACpB,GAAG;AACH,eAAe,sBAAK;AACpB,GAAG,uBAAuB,0BAAO;AACjC;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG,QAAQ,4CAAgB;AAC3B;AACA;AACA,GAAG,+BAA+B,kBAAG;AACrC;AACA;AACA;AACA,GAAG;;AAEH,eAAe,gDAAkB;AACjC;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,4CAAe;AAC9B;AACA,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;;AAEA,WAAO;AACP,cAAc,2CAAiB,eAAe,qBAAmB;AACjE;AACA,WAAW,qBAAmB;AAC9B;AACA;AACA;AACA;AACA;AACA,mBAAmB,4CAAe;;AAElC;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA,CAAC;;AAEc,qFAAO,E;;;;;;;;ACnOtB;AACA;AACA;AACA,eAAe,mBAAO,CAAC,MAAqC;AAC5D;AACA;;;;;;;;;ACNA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAAY,4CAAK;AACuD;AAC3C;AACe;AACO;AACM;AACjB;AACxC;AACO;AACP;AACA;AACA,UAAU,yEAAe;AACzB,YAAY,oDAAM;;AAElB,kBAAkB,sDAAQ;AAC1B;AACA;;AAEA,cAAc,yDAAW;AACzB;AACA;;AAEA;AACA;AACA;AACA,KAAK,aAAa;;AAElB,GAAG;;AAEH,EAAE,uDAAS;AACX;AACA;AACA;;AAEA;AACA;AACA;;AAEA,YAAY,wEAAiB;AAC7B;AACA;AACA;;AAEA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,eAAe,yDAAK;AACpB,GAAG;AACH;AACA,GAAG,2BAA2B,6EAAS;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,cAAc,4DAAK;AACnB;AACA,mBAAmB,iDAAG,CAAC,yDAAK,yBAAyB,yDAAK;AAC1D;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,OAAO;AACP;AACA,GAAG;AACH,eAAe,yDAAK;AACpB;AACA;AACA;AACA,GAAG;AACH,E","file":"x","sourcesContent":["// This icon file is generated automatically.\nvar TagOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M938 458.8l-29.6-312.6c-1.5-16.2-14.4-29-30.6-30.6L565.2 86h-.4c-3.2 0-5.7 1-7.6 2.9L88.9 557.2a9.96 9.96 0 000 14.1l363.8 363.8c1.9 1.9 4.4 2.9 7.1 2.9s5.2-1 7.1-2.9l468.3-468.3c2-2.1 3-5 2.8-8zM459.7 834.7L189.3 564.3 589 164.6 836 188l23.4 247-399.7 399.7zM680 256c-48.5 0-88 39.5-88 88s39.5 88 88 88 88-39.5 88-88-39.5-88-88-88zm0 120c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z\" } }] }, \"name\": \"tag\", \"theme\": \"outlined\" };\nexport default TagOutlined;\n","import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport TagOutlinedSvg from \"@ant-design/icons-svg/es/asn/TagOutlined\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar TagOutlined = function TagOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, _objectSpread(_objectSpread({}, props), {}, {\n    ref: ref,\n    icon: TagOutlinedSvg\n  }));\n};\n\nTagOutlined.displayName = 'TagOutlined';\nexport default /*#__PURE__*/React.forwardRef(TagOutlined);","import _regeneratorRuntime from \"/Users/zsj/work/vimconfig/test/creation/packages/client/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/zsj/work/vimconfig/test/creation/packages/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport \"antd/lib/modal/style\";\nimport _Modal from \"antd/lib/modal\";\nimport \"antd/lib/form/style\";\nimport _Form from \"antd/lib/form\";\nimport \"antd/lib/input/style\";\nimport _Input from \"antd/lib/input\";\nimport \"antd/lib/message/style\";\nimport _message from \"antd/lib/message\";\nvar __jsx = React.createElement;\nimport React, { useState, useEffect, useCallback, useContext, useRef } from 'react';\nimport { Helmet } from 'react-helmet';\nimport { default as Router } from 'next/router';\nimport Link from 'next/link';\nimport { useTranslations } from 'next-intl';\nimport { TagOutlined } from '@ant-design/icons';\nimport { GlobalContext } from '@/context/global';\nimport { DoubleColumnLayout } from '@/layout/DoubleColumnLayout';\nimport { ArticleProvider } from '@/providers/article';\nimport { LocaleTime } from '@/components/LocaleTime';\nimport { ImageViewer } from '@/components/ImageViewer';\nimport { Comment } from '@/components/Comment';\nimport { ArticleRecommend } from '@/components/ArticleRecommend';\nimport { MarkdownReader } from '@/components/MarkdownReader';\nimport { Toc } from '@/components/Toc';\nimport style from './index.module.scss';\n\nvar url = require('url');\n\nvar Article = function Article(_ref) {\n  var article = _ref.article;\n  var t = useTranslations();\n\n  var _useContext = useContext(GlobalContext),\n      setting = _useContext.setting;\n\n  var passwdRef = useRef(null);\n\n  var _useState = useState(article && article.needPassword),\n      shouldCheckPassWord = _useState[0],\n      setShouldCheckPassword = _useState[1];\n\n  var _useState2 = useState(article && article.totalAmount && !article.isPay),\n      shouldCheckPay = _useState2[0],\n      setShouldCheckPay = _useState2[1]; // const [shouldCheckPay, setShouldCheckPay] = useState(true);\n\n\n  var tocs = article && article.toc ? JSON.parse(article.toc) : []; // 检查文章密码\n\n  var checkPassWord = useCallback(function () {\n    ArticleProvider.checkPassword(article.id, passwdRef.current).then(function (res) {\n      if (res.pass) {\n        Object.assign(article, res);\n        setShouldCheckPassword(false);\n      } else {\n        _message.error(t('wrongPasswd'));\n\n        setShouldCheckPassword(true);\n      }\n    });\n  }, [t, article]); // 发起支付\n\n  var back = useCallback(function () {\n    Router.push('/');\n  }, []);\n\n  var checkPassWordModal = __jsx(_Modal, {\n    title: t('protectedArticleMsg'),\n    cancelText: t('backHome'),\n    okText: t('confirm'),\n    visible: shouldCheckPassWord,\n    onOk: checkPassWord,\n    onCancel: back\n  }, __jsx(_Form.Item, {\n    label: t('passwd')\n  }, __jsx(_Input.Password, {\n    onChange: function onChange(e) {\n      passwdRef.current = e.target.value;\n    }\n  })));\n\n  useEffect(function () {\n    setShouldCheckPassword(article && article.needPassword);\n  }, [article]); // 更新阅读量\n\n  useEffect(function () {\n    if (!shouldCheckPassWord) {\n      ArticleProvider.updateArticleViews(article.id);\n    }\n  }, [shouldCheckPassWord, article]);\n\n  var Content = __jsx(React.Fragment, null, checkPassWordModal, __jsx(Helmet, null, __jsx(\"title\", null, (article.title || t('unknownTitle')) + ' | ' + setting.systemTitle)), __jsx(ImageViewer, {\n    containerSelector: \"#js-article-wrapper\"\n  }, __jsx(\"article\", {\n    id: \"js-article-wrapper\",\n    className: style.articleWrap\n  }, setting.systemUrl && __jsx(\"meta\", {\n    itemProp: \"url\",\n    content: url.resolve(setting.systemUrl, \"/article/\".concat(article.id))\n  }), __jsx(\"meta\", {\n    itemProp: \"headline\",\n    content: article.title\n  }), article.tags && __jsx(\"meta\", {\n    itemProp: \"keywords\",\n    content: article.tags.map(function (tag) {\n      return tag.label;\n    }).join(' ')\n  }), __jsx(\"meta\", {\n    itemProp: \"dataPublished\",\n    content: article.publishAt\n  }), article.cover && __jsx(\"meta\", {\n    itemProp: \"image\",\n    content: article.cover\n  }), article.cover && __jsx(\"div\", {\n    className: style.coverWrapper\n  }, __jsx(\"img\", {\n    src: article.cover,\n    alt: t('articleCover')\n  })), __jsx(\"div\", {\n    className: style.metaInfoWrap\n  }, __jsx(\"h1\", {\n    className: style.title\n  }, article.title), __jsx(\"p\", {\n    className: style.desc\n  }, __jsx(\"span\", null, t('publishAt'), __jsx(LocaleTime, {\n    date: article.publishAt\n  })), __jsx(\"span\", null, \" \\u2022 \"), __jsx(\"span\", null, t('readings'), \" \", article.views))), __jsx(MarkdownReader, {\n    content: article.html\n  }), __jsx(\"div\", {\n    className: style.footerInfoWrap\n  }, __jsx(\"div\", {\n    className: style.copyrightInfo\n  }, t('publishAt'), __jsx(LocaleTime, {\n    date: article.publishAt\n  }), \" | \", t('copyrightInfo'), \"\\uFF1A\", __jsx(\"a\", {\n    href: \"https://creativecommons.org/licenses/by-nc/3.0/cn/deed.zh\",\n    target: \"_blank\",\n    rel: \"noreferrer\"\n  }, t('copyrightContent'))), article.tags && article.tags.length ? __jsx(\"div\", {\n    className: style.tagsWrap\n  }, article.tags.map(function (tag) {\n    return __jsx(\"div\", {\n      className: style.tagWrapper,\n      key: tag.id\n    }, __jsx(\"div\", {\n      className: style.tag\n    }, __jsx(Link, {\n      href: '/tag/[tag]',\n      as: '/tag/' + tag.value,\n      scroll: false\n    }, __jsx(\"a\", null, __jsx(TagOutlined, null), __jsx(\"span\", null, tag.label)))));\n  })) : null)), article.isCommentable && __jsx(\"div\", {\n    className: style.commentWrap\n  }, __jsx(\"p\", {\n    className: style.title\n  }, t('comment')), __jsx(Comment, {\n    key: article.id,\n    hostId: article.id\n  }))));\n\n  var Aside = __jsx(\"div\", {\n    className: 'sticky'\n  }, __jsx(ArticleRecommend, {\n    articleId: article.id,\n    mode: \"inline\"\n  }), tocs && tocs.length ? __jsx(Toc, {\n    key: article.id,\n    tocs: tocs,\n    maxHeight: '80vh'\n  }) : null);\n\n  return __jsx(DoubleColumnLayout, {\n    leftNode: Content,\n    rightNode: Aside,\n    likesProps: {\n      defaultCount: article.likes,\n      id: article.id,\n      api: function api(id, type) {\n        return ArticleProvider.updateArticleLikes(id, type).then(function (res) {\n          return res.likes;\n        });\n      }\n    },\n    showComment: article.isCommentable,\n    shareProps: shouldCheckPassWord ? null : {\n      cover: article.cover,\n      title: article.title,\n      desc: article.summary,\n      url: \"/article/\".concat(article.id)\n    },\n    showPay: shouldCheckPay ? {\n      id: article.id,\n      totalAmount: article.totalAmount\n    } : null\n  });\n};\n\nArticle.getInitialProps = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(ctx) {\n    var id, article;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            id = ctx.query.id;\n            _context.next = 3;\n            return ArticleProvider.getArticle(id);\n\n          case 3:\n            article = _context.sent;\n            return _context.abrupt(\"return\", {\n              article: article\n            });\n\n          case 5:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function (_x) {\n    return _ref2.apply(this, arguments);\n  };\n}();\n\nexport default Article;","\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/article/[id]\",\n      function () {\n        return require(\"private-next-pages/article/[id].tsx\");\n      }\n    ]);\n  ","var __jsx = React.createElement;\nimport React, { useCallback, useEffect, useRef, useState } from 'react';\nimport cls from 'classnames';\nimport { useTranslations } from 'next-intl';\nimport { isOdd, elementInViewport } from '@/utils';\nimport { ListTrail } from '@/components/Animation/Trail';\nimport style from './index.module.scss';\nvar HEIGHT = 32;\nexport var Toc = function Toc(_ref) {\n  var _ref$tocs = _ref.tocs,\n      tocs = _ref$tocs === void 0 ? [] : _ref$tocs;\n  var t = useTranslations();\n  var ref = useRef();\n\n  var _useState = useState(0),\n      active = _useState[0],\n      setActive = _useState[1];\n\n  var _goto = useCallback(function (toc) {\n    try {\n      var el = document.getElementById(toc.id);\n\n      if (el) {\n        el.scrollIntoView();\n      }\n    } catch (e) {} // eslint-disable-line no-empty\n\n  }, []);\n\n  useEffect(function () {\n    var listener = function listener() {\n      tocs.reduceRight(function (_, toc, index) {\n        var el = document.getElementById(toc.id);\n\n        if (!el) {\n          return _;\n        }\n\n        if (elementInViewport(el)) {\n          setActive(index);\n          ref.current.scrollTop = HEIGHT * index;\n        }\n\n        return _;\n      }, null);\n    };\n\n    document.addEventListener('scroll', listener);\n    return function () {\n      document.removeEventListener('scroll', listener);\n    };\n  }, [tocs]);\n  return __jsx(\"div\", {\n    className: style.wrapper\n  }, __jsx(\"header\", null, t('toc')), __jsx(\"main\", null, __jsx(\"div\", {\n    ref: ref\n  }, __jsx(\"div\", null, __jsx(ListTrail, {\n    length: tocs.length,\n    options: {\n      opacity: 1,\n      height: 32,\n      from: {\n        opacity: 0,\n        height: 0\n      }\n    },\n    element: 'div',\n    renderItem: function renderItem(idx) {\n      var toc = tocs[idx];\n      var v = toc.level;\n      var f = isOdd(v - 1);\n      return __jsx(\"div\", {\n        className: cls(style.item, idx === active && style.active),\n        style: {\n          'paddingLeft': 12 * (v - 1),\n          'cursor': 'pointer',\n          '--dot-left': 10 * (v - 2) + 'px',\n          '--dot-width': 6 - (v - 1) + (f ? 1 : 0) + 'px'\n        },\n        onClick: function onClick() {\n          return _goto(toc);\n        }\n      }, __jsx(\"div\", null, toc.text));\n    }\n  }), __jsx(\"div\", {\n    className: style.indicator,\n    style: {\n      top: HEIGHT * active + 'px'\n    }\n  })))));\n};"]}}