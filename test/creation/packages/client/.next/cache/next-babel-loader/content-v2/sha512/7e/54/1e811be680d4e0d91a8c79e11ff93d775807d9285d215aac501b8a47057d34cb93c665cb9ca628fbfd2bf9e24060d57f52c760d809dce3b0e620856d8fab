{"ast":null,"code":"import \"antd/lib/badge/style\";\nimport _Badge from \"antd/lib/badge\";\nvar __jsx = React.createElement;\nimport React, { useCallback, useEffect, useState } from 'react';\nimport cls from 'classnames';\nimport style from './index.module.scss';\nexport const Likes = ({\n  defaultCount,\n  id,\n  api\n}) => {\n  const {\n    0: count,\n    1: setCount\n  } = useState(defaultCount);\n  const {\n    0: likes,\n    1: setLikes\n  } = useState([]);\n  const like = useCallback(() => {\n    const idx = likes.indexOf(id);\n    const type = idx > -1 ? 'dislike' : 'like';\n    const newLikes = idx > -1 ? [...likes.slice(0, idx), ...likes.slice(idx + 1)] : [...likes, id];\n    api(id, type).then(c => {\n      setCount(c);\n      window.localStorage.setItem('LIKES', JSON.stringify(newLikes));\n      setLikes(newLikes);\n    });\n  }, [likes, id, api]);\n  useEffect(() => {\n    setCount(defaultCount);\n  }, [defaultCount]);\n  useEffect(() => {\n    const likeds = JSON.parse(window.localStorage.getItem('LIKES')) || [];\n    setLikes(likeds);\n  }, []);\n  return __jsx(_Badge, {\n    size: \"small\",\n    count: count,\n    style: {\n      backgroundColor: 'var(--primary-color)'\n    }\n  }, __jsx(\"div\", {\n    className: cls(style.wrap, likes.includes(id) && style.active),\n    onClick: like\n  }, __jsx(\"svg\", {\n    viewBox: \"0 0 1024 1024\",\n    version: \"1.1\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: \"1em\",\n    height: \"1em\"\n  }, __jsx(\"path\", {\n    d: \"M859.8 191.2c-80.8-84.2-212-84.2-292.8 0L512 248.2l-55-57.2c-81-84.2-212-84.2-292.8 0-91 94.6-91 248.2 0 342.8L512 896l347.8-362C950.8 439.4 950.8 285.8 859.8 191.2z\",\n    fill: \"currentColor\"\n  }))));\n};","map":null,"metadata":{},"sourceType":"module"}