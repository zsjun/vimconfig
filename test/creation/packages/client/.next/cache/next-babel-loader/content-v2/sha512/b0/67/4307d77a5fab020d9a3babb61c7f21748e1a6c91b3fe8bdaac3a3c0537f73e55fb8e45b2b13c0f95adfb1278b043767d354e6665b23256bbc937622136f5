{"ast":null,"code":"import \"antd/lib/avatar/style\";\nimport _Avatar from \"antd/lib/avatar\";\nvar __jsx = React.createElement;\n\n/* eslint-disable @typescript-eslint/no-use-before-define */\nimport React, { useMemo } from 'react';\nimport cls from 'classnames';\nimport { useTranslations } from 'next-intl';\nimport { MessageOutlined } from '@ant-design/icons';\nimport { ConditionTransition } from '@/components/Animation/Transition';\nimport { Opacity } from '@/components/Animation/Opacity';\nimport { LocaleTime } from '@/components/LocaleTime';\nimport { getRandomColor } from '@/utils';\nimport { useToggle } from '@/hooks/useToggle';\nimport { CommentEditor } from '../CommentEditor';\nimport styles from './index.module.scss';\nexport function CommentItem({\n  comment,\n  parentComment,\n  isChild = false\n}) {\n  const t = useTranslations('commentNamespace');\n  const [editorVisible, toggleEditorVisible] = useToggle(false);\n  const avatarSize = useMemo(() => isChild ? 24 : 32, [isChild]);\n  const paddingHorizontal = useMemo(() => avatarSize + 8, [avatarSize]);\n  return __jsx(\"div\", {\n    className: cls({\n      [styles.commentItem]: true,\n      [styles.isParent]: !isChild,\n      [styles.isChild]: isChild\n    })\n  }, __jsx(\"header\", null, __jsx(_Avatar, {\n    size: avatarSize,\n    style: {\n      backgroundColor: getRandomColor(comment.name)\n    }\n  }, ('' + comment.name).charAt(0).toUpperCase()), __jsx(\"span\", {\n    className: styles.name\n  }, __jsx(\"strong\", null, comment.name), comment.replyUserName ? __jsx(React.Fragment, null, __jsx(\"span\", {\n    style: {\n      margin: '0 8px'\n    }\n  }, t('reply')), __jsx(\"strong\", {\n    className: styles.replyUser\n  }, comment.replyUserName)) : null)), __jsx(\"main\", {\n    style: {\n      padding: `12px 0 12px ${paddingHorizontal}px`\n    }\n  }, __jsx(\"div\", {\n    dangerouslySetInnerHTML: {\n      __html: comment.html || comment.content\n    }\n  })), __jsx(\"footer\", {\n    style: {\n      paddingLeft: `${paddingHorizontal}px`\n    }\n  }, __jsx(\"div\", {\n    className: styles.meta\n  }, comment.userAgent ? __jsx(\"span\", null, comment.userAgent, ' Â· ') : null, __jsx(LocaleTime, {\n    date: comment.createAt,\n    timeago: true\n  }), __jsx(\"span\", {\n    className: styles.reply,\n    onClick: toggleEditorVisible\n  }, __jsx(MessageOutlined, {\n    style: {\n      marginRight: 4\n    }\n  }), t('reply'))), __jsx(ConditionTransition, {\n    visible: editorVisible,\n    options: {\n      from: {\n        opacity: 0,\n        height: 0\n      },\n      enter: {\n        opacity: 1,\n        height: 155\n      },\n      leave: {\n        opacity: 0,\n        height: 0\n      }\n    }\n  }, __jsx(\"div\", {\n    className: styles.editorWrapper\n  }, __jsx(CommentEditor, {\n    small: true,\n    hostId: comment.hostId,\n    parentComment: parentComment,\n    replyComment: comment,\n    onOk: toggleEditorVisible,\n    onClose: toggleEditorVisible\n  }))), comment.children && __jsx(\"div\", null, __jsx(Comments, {\n    comments: comment.children,\n    parentComment: comment,\n    isChild: true\n  }))));\n}\nexport function Comments({\n  comments,\n  parentComment = null,\n  isChild = false\n}) {\n  return __jsx(React.Fragment, null, comments.map(comment => {\n    const component = __jsx(CommentItem, {\n      comment: comment,\n      parentComment: parentComment || comment,\n      isChild: isChild\n    });\n\n    return isChild ? __jsx(Opacity, null, component) : component;\n  }));\n}","map":null,"metadata":{},"sourceType":"module"}