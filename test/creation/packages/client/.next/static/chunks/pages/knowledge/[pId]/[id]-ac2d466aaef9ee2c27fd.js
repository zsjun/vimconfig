_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[31],{H3WJ:function(e,t,n){"use strict";var a=n("J3t6"),r=n("nFQf");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=r(n("anXS")),l=r(n("MF/n")),o=r(n("kLLK")),u=a(n("q1tI")),i=r(n("TSYQ")),s=r(n("0r0h")),d=r(n("wzuP")),p=r(n("thPT")),f=r(n("Jv8k")),m=n("vgIT"),v=r(n("m4nH")),h=n("vCXI"),g=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n};function b(e,t,n,a){var r=n.indexOf(e)===n.length-1,c=function(e,t){if(!e.breadcrumbName)return null;var n=Object.keys(t).join("|");return e.breadcrumbName.replace(new RegExp(":(".concat(n,")"),"g"),(function(e,n){return t[n]||e}))}(e,t);return r?u.createElement("span",null,c):u.createElement("a",{href:"#/".concat(a.join("/"))},c)}var w=function(e,t){return e=(e||"").replace(/^\//,""),Object.keys(t).forEach((function(n){e=e.replace(":".concat(n),t[n])})),e},y=function(e){var t,n=e.prefixCls,a=e.separator,r=void 0===a?"/":a,p=e.style,y=e.className,k=e.routes,O=e.children,j=e.itemRender,E=void 0===j?b:j,N=e.params,I=void 0===N?{}:N,_=g(e,["prefixCls","separator","style","className","routes","children","itemRender","params"]),x=u.useContext(m.ConfigContext),C=x.getPrefixCls,P=x.direction,R=C("breadcrumb",n);if(k&&k.length>0){var T=[];t=k.map((function(e){var t,n=w(e.path,I);return n&&T.push(n),e.children&&e.children.length&&(t=u.createElement(f.default,null,e.children.map((function(e){return u.createElement(f.default.Item,{key:e.path||e.breadcrumbName},E(e,I,k,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,a=(0,o.default)(e),r=w(t,n);return r&&a.push(r),a}(T,e.path,I)))})))),u.createElement(d.default,{overlay:t,separator:r,key:n||e.breadcrumbName},E(e,I,k,T))}))}else O&&(t=(0,s.default)(O).map((function(e,t){return e?((0,v.default)(e.type&&(!0===e.type.__ANT_BREADCRUMB_ITEM||!0===e.type.__ANT_BREADCRUMB_SEPARATOR),"Breadcrumb","Only accepts Breadcrumb.Item and Breadcrumb.Separator as it's children"),(0,h.cloneElement)(e,{separator:r,key:t})):e})));var S=(0,i.default)(y,R,(0,l.default)({},"".concat(R,"-rtl"),"rtl"===P));return u.createElement("div",(0,c.default)({className:S,style:p},_),t)};y.Item=d.default,y.Separator=p.default;var k=y;t.default=k},"JT+3":function(e,t,n){"use strict";n("VEUW"),n("64Tc"),n("PFYH"),n("G851")},UESt:function(e,t,n){"use strict";var a=n("Zjvm"),r=n("q1tI"),c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M765.7 486.8L314.9 134.7A7.97 7.97 0 00302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 000-50.4z"}}]},name:"right",theme:"outlined"},l=n("6VBw"),o=function(e,t){return r.createElement(l.a,Object(a.a)(Object(a.a)({},e),{},{ref:t,icon:c}))};o.displayName="RightOutlined";t.a=r.forwardRef(o)},XnLC:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n("o0o1"),r=n.n(a),c=n("HaE+"),l=n("1OyB"),o=n("vuIU"),u=n("pUN5"),i=function(){function e(){Object(l.a)(this,e)}return Object(o.a)(e,null,[{key:"createBook",value:function(e){return u.a.post("/knowledge/book",e)}},{key:"createChapters",value:function(e){return u.a.post("/knowledge/chapter",e)}},{key:"deleteKnowledge",value:function(){var e=Object(c.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",u.a.delete("/knowledge/".concat(t)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateKnowledge",value:function(){var e=Object(c.a)(r.a.mark((function e(t,n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",u.a.patch("/knowledge/".concat(t),n));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getKnowledges",value:function(){var e=Object(c.a)(r.a.mark((function e(){var t,n=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.abrupt("return",u.a.get("/knowledge",{params:t}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getKnowledge",value:function(){var e=Object(c.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",u.a.get("/knowledge/".concat(t)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateKnowledgeViews",value:function(){var e=Object(c.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",u.a.post("/knowledge/".concat(t,"/views")));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateKnowledgeLikes",value:function(){var e=Object(c.a)(r.a.mark((function e(t,n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",u.a.post("/knowledge/".concat(t,"/likes"),{type:n}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}()},"Y/VR":function(e,t,n){"use strict";var a=n("nFQf");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n("H3WJ")).default;t.default=r},cWDq:function(e,t,n){"use strict";n.r(t);var a=n("o0o1"),r=n.n(a),c=n("ODXe"),l=n("HaE+"),o=(n("JT+3"),n("Y/VR")),u=n.n(o),i=n("q1tI"),s=n.n(i),d=n("TSYQ"),p=n.n(d),f=n("YFqc"),m=n.n(f),v=n("Az7S"),h=n("Zjvm"),g={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 000 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"}}]},name:"left",theme:"outlined"},b=n("6VBw"),w=function(e,t){return i.createElement(b.a,Object(h.a)(Object(h.a)({},e),{},{ref:t,icon:g}))};w.displayName="LeftOutlined";var y=i.forwardRef(w),k=n("UESt"),O=n("XnLC"),j=n("zRT3"),E=n("JMli"),N=n("GvOY"),I=n("wFKl"),_=n("yySa"),x=n("cor7"),C=n("NojN"),P=n.n(C),R=s.a.createElement,T=function(e){var t=e.pId,n=e.id,a=e.book,r=e.chapter,c=Object(v.b)(),l=a.children||[],o=r.toc?JSON.parse(r.toc):[],d=l.findIndex((function(e){return e.id===r.id})),f=Object(i.useMemo)((function(){return d<=0?null:l[d-1]}),[d]),h=Object(i.useMemo)((function(){return d>=l.length-1?null:l[d+1]}),[d]);return Object(i.useEffect)((function(){r&&(O.a.updateKnowledgeViews(t),O.a.updateKnowledgeViews(n))}),[t,n,r]),Object(i.useEffect)((function(){r&&Promise.resolve().then((function(){var e=document.querySelector("#js-toc-item-wrapper-"+n);console.log(e),e&&e.scrollIntoView()}))}),[r,n]),r?R(s.a.Fragment,null,R(j.a,{leftNode:R(s.a.Fragment,null,R("div",{className:p()(P.a.breadcrump)},R(u.a,null,R(u.a.Item,null,R(m.a,{href:"/knowledge"},R("a",null,c("knowledgeBooks")))),R(u.a.Item,null,R(m.a,{as:"/knowledge/".concat(t),href:"/knowledge/[pId]"},R("a",null,a.title))),R(u.a.Item,null,r.title))),R(N.a,{containerSelector:"#js-knowledge-content"},R("div",{id:"js-knowledge-content",className:P.a.content},R("article",null,R("div",{className:P.a.meta},R("h1",{className:P.a.title},r.title),R("p",{className:P.a.desc},R("span",null,c("publishAt"),R(E.a,{date:r.publishAt})),R("span",null," \u2022 "),R("span",null,c("readings")," ",r.views))),R("div",null,R(I.a,{content:r.html||r.content})),R("div",{className:P.a.copyrightInfo},c("publishAt"),R(E.a,{date:r.publishAt})," | ",c("copyrightInfo"),"\uff1a",R("a",{href:"https://creativecommons.org/licenses/by-nc/3.0/cn/deed.zh",target:"_blank",rel:"noreferrer"},c("copyrightContent"))),R("div",{className:P.a.navigation},f&&R("div",{className:P.a.left,style:{width:h?"45%":"100%"}},R(m.a,{href:"/knowledge/[pId]/[id]",as:"/knowledge/".concat(t,"/").concat(f.id)},R("a",null,R(y,null),R("span",null,f.title)))),h&&R("div",{className:P.a.right,style:{width:f?"45%":"100%"}},R(m.a,{href:"/knowledge/[pId]/[id]",as:"/knowledge/".concat(t,"/").concat(h.id)},R("a",null,R("span",null,h.title),R(k.a,null)))))),a.isCommentable?R("div",{className:P.a.commentWrap},R("p",{className:P.a.title},c("comment")),R(x.b,{key:r.id,hostId:r.id})):null))),rightNode:R("div",{className:"sticky",style:{marginTop:37}},R("div",{className:p()(P.a.infoWrapper,P.a.isBg)},R("header",null,a.title),R("main",null,R("ul",null,l.map((function(e){return R("li",{key:e.id,id:"js-toc-item-wrapper-".concat(e.id)},R(m.a,{as:"/knowledge/".concat(t,"/").concat(e.id),href:"/knowledge/[pId]/[id]"},R("a",{className:p()(e.id===n&&P.a.active)},e.title)))}))))),o&&o.length?R("div",{className:P.a.infoWrapper},R(_.a,{key:r.id,tocs:o})):null),likesProps:{defaultCount:r.likes,id:r.id,api:function(e,t){return O.a.updateKnowledgeLikes(e,t).then((function(e){return e.likes}))}},showComment:a.isCommentable,shareProps:{cover:a.cover,title:a.title,desc:r.title,url:"/knowledge/".concat(t,"/").concat(n)}})):R("p",null,c("unknownKnowledgeChapter"))};T.getInitialProps=function(){var e=Object(l.a)(r.a.mark((function e(t){var n,a,l,o,u,i,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.query,a=n.pId,l=n.id,e.next=3,Promise.all([O.a.getKnowledge(a),O.a.getKnowledge(l)]);case 3:return o=e.sent,u=Object(c.a)(o,2),i=u[0],s=u[1],e.abrupt("return",{pId:a,book:i,id:l,chapter:s});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.default=T},thPT:function(e,t,n){"use strict";var a=n("J3t6");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n("q1tI")),c=n("vgIT"),l=function(e){var t=e.children,n=(0,r.useContext(c.ConfigContext).getPrefixCls)("breadcrumb");return r.createElement("span",{className:"".concat(n,"-separator")},t||"/")};l.__ANT_BREADCRUMB_SEPARATOR=!0;var o=l;t.default=o},wzuP:function(e,t,n){"use strict";var a=n("J3t6"),r=n("nFQf");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=r(n("anXS")),l=a(n("q1tI")),o=r(n("HQEm")),u=r(n("/Rfv")),i=n("vgIT"),s=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n},d=function(e){var t,n,a=e.prefixCls,r=e.separator,d=void 0===r?"/":r,p=e.children,f=e.overlay,m=e.dropdownProps,v=s(e,["prefixCls","separator","children","overlay","dropdownProps"]),h=(0,l.useContext(i.ConfigContext).getPrefixCls)("breadcrumb",a);return t="href"in v?l.createElement("a",(0,c.default)({className:"".concat(h,"-link")},v),p):l.createElement("span",(0,c.default)({className:"".concat(h,"-link")},v),p),n=t,t=f?l.createElement(u.default,(0,c.default)({overlay:f,placement:"bottomCenter"},m),l.createElement("span",{className:"".concat(h,"-overlay-link")},n,l.createElement(o.default,null))):n,p?l.createElement("span",null,t,d&&""!==d&&l.createElement("span",{className:"".concat(h,"-separator")},d)):null};d.__ANT_BREADCRUMB_ITEM=!0;var p=d;t.default=p},yySa:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var a=n("q1tI"),r=n.n(a),c=n("TSYQ"),l=n.n(c),o=n("Az7S"),u=n("MLMA"),i=n("d/kO"),s=n("bybV"),d=n.n(s),p=r.a.createElement,f=function(e){var t=e.tocs,n=void 0===t?[]:t,r=Object(o.b)(),c=Object(a.useRef)(),s=Object(a.useState)(0),f=s[0],m=s[1],v=Object(a.useCallback)((function(e){try{var t=document.getElementById(e.id);t&&t.scrollIntoView()}catch(n){}}),[]);return Object(a.useEffect)((function(){var e=function(){n.reduceRight((function(e,t,n){var a=document.getElementById(t.id);return a?(Object(u.b)(a)&&(m(n),c.current.scrollTop=32*n),e):e}),null)};return document.addEventListener("scroll",e),function(){document.removeEventListener("scroll",e)}}),[n]),p("div",{className:d.a.wrapper},p("header",null,r("toc")),p("main",null,p("div",{ref:c},p("div",null,p(i.a,{length:n.length,options:{opacity:1,height:32,from:{opacity:0,height:0}},element:"div",renderItem:function(e){var t=n[e],a=t.level,r=Object(u.e)(a-1);return p("div",{className:l()(d.a.item,e===f&&d.a.active),style:{paddingLeft:12*(a-1),cursor:"pointer","--dot-left":10*(a-2)+"px","--dot-width":6-(a-1)+(r?1:0)+"px"},onClick:function(){return v(t)}},p("div",null,t.text))}}),p("div",{className:d.a.indicator,style:{top:32*f+"px"}})))))}},zlRv:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/knowledge/[pId]/[id]",function(){return n("cWDq")}])}},[["zlRv",1,2,0,3,4,5,7,8,9,10,11,15,18,19,6]]]);