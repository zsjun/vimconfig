_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[26,14],{"63sL":function(e,t,a){"use strict";a.r(t);var n=a("o0o1"),r=a.n(n),c=a("HaE+"),i=(a("fwXI"),a("CC+v")),l=a.n(i),s=(a("nTym"),a("qu0K")),o=a.n(s),u=(a("cUip"),a("iJl9")),d=a.n(u),m=(a("tL+A"),a("QpBz")),p=a.n(m),f=a("q1tI"),v=a.n(f),b=a("TJpk"),h=a("20a2"),g=a.n(h),w=a("YFqc"),y=a.n(w),N=a("Az7S"),O=a("Zjvm"),j={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M938 458.8l-29.6-312.6c-1.5-16.2-14.4-29-30.6-30.6L565.2 86h-.4c-3.2 0-5.7 1-7.6 2.9L88.9 557.2a9.96 9.96 0 000 14.1l363.8 363.8c1.9 1.9 4.4 2.9 7.1 2.9s5.2-1 7.1-2.9l468.3-468.3c2-2.1 3-5 2.8-8zM459.7 834.7L189.3 564.3 589 164.6 836 188l23.4 247-399.7 399.7zM680 256c-48.5 0-88 39.5-88 88s39.5 88 88 88 88-39.5 88-88-39.5-88-88-88zm0 120c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z"}}]},name:"tag",theme:"outlined"},k=a("6VBw"),P=function(e,t){return f.createElement(k.a,Object(O.a)(Object(O.a)({},e),{},{ref:t,icon:j}))};P.displayName="TagOutlined";var A=f.forwardRef(P),E=a("gFb0"),C=a("zRT3"),I=a("hfvm"),_=a("JMli"),L=a("GvOY"),T=a("cor7"),x=a("PzmL"),z=a("wFKl"),S=a("yySa"),M=a("5MOb"),W=a.n(M),B=v.a.createElement,H=a("QmWs"),J=function(e){var t=e.article,a=Object(N.b)(),n=Object(f.useContext)(E.a).setting,r=Object(f.useRef)(null),c=Object(f.useState)(t&&t.needPassword),i=c[0],s=c[1],u=Object(f.useState)(t&&t.totalAmount&&!t.isPay),m=u[0],h=(u[1],t&&t.toc?JSON.parse(t.toc):[]),w=Object(f.useCallback)((function(){I.a.checkPassword(t.id,r.current).then((function(e){e.pass?(Object.assign(t,e),s(!1)):(p.a.error(a("wrongPasswd")),s(!0))}))}),[a,t]),O=Object(f.useCallback)((function(){g.a.push("/")}),[]),j=B(l.a,{title:a("protectedArticleMsg"),cancelText:a("backHome"),okText:a("confirm"),visible:i,onOk:w,onCancel:O},B(o.a.Item,{label:a("passwd")},B(d.a.Password,{onChange:function(e){r.current=e.target.value}})));Object(f.useEffect)((function(){s(t&&t.needPassword)}),[t]),Object(f.useEffect)((function(){i||I.a.updateArticleViews(t.id)}),[i,t]);var k=B(v.a.Fragment,null,j,B(b.Helmet,null,B("title",null,(t.title||a("unknownTitle"))+" | "+n.systemTitle)),B(L.a,{containerSelector:"#js-article-wrapper"},B("article",{id:"js-article-wrapper",className:W.a.articleWrap},n.systemUrl&&B("meta",{itemProp:"url",content:H.resolve(n.systemUrl,"/article/".concat(t.id))}),B("meta",{itemProp:"headline",content:t.title}),t.tags&&B("meta",{itemProp:"keywords",content:t.tags.map((function(e){return e.label})).join(" ")}),B("meta",{itemProp:"dataPublished",content:t.publishAt}),t.cover&&B("meta",{itemProp:"image",content:t.cover}),t.cover&&B("div",{className:W.a.coverWrapper},B("img",{src:t.cover,alt:a("articleCover")})),B("div",{className:W.a.metaInfoWrap},B("h1",{className:W.a.title},t.title),B("p",{className:W.a.desc},B("span",null,a("publishAt"),B(_.a,{date:t.publishAt})),B("span",null," \u2022 "),B("span",null,a("readings")," ",t.views))),B(z.a,{content:t.html}),B("div",{className:W.a.footerInfoWrap},B("div",{className:W.a.copyrightInfo},a("publishAt"),B(_.a,{date:t.publishAt})," | ",a("copyrightInfo"),"\uff1a",B("a",{href:"https://creativecommons.org/licenses/by-nc/3.0/cn/deed.zh",target:"_blank",rel:"noreferrer"},a("copyrightContent"))),t.tags&&t.tags.length?B("div",{className:W.a.tagsWrap},t.tags.map((function(e){return B("div",{className:W.a.tagWrapper,key:e.id},B("div",{className:W.a.tag},B(y.a,{href:"/tag/[tag]",as:"/tag/"+e.value,scroll:!1},B("a",null,B(A,null),B("span",null,e.label)))))}))):null)),t.isCommentable&&B("div",{className:W.a.commentWrap},B("p",{className:W.a.title},a("comment")),B(T.b,{key:t.id,hostId:t.id})))),P=B("div",{className:"sticky"},B(x.a,{articleId:t.id,mode:"inline"}),h&&h.length?B(S.a,{key:t.id,tocs:h,maxHeight:"80vh"}):null);return B(C.a,{leftNode:k,rightNode:P,likesProps:{defaultCount:t.likes,id:t.id,api:function(e,t){return I.a.updateArticleLikes(e,t).then((function(e){return e.likes}))}},showComment:t.isCommentable,shareProps:i?null:{cover:t.cover,title:t.title,desc:t.summary,url:"/article/".concat(t.id)},showPay:m?{id:t.id,totalAmount:t.totalAmount}:null})};J.getInitialProps=function(){var e=Object(c.a)(r.a.mark((function e(t){var a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.query.id,e.next=3,I.a.getArticle(a);case 3:return n=e.sent,e.abrupt("return",{article:n});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.default=J},NBH1:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/article/[id]",function(){return a("63sL")}])},yySa:function(e,t,a){"use strict";a.d(t,"a",(function(){return p}));var n=a("q1tI"),r=a.n(n),c=a("TSYQ"),i=a.n(c),l=a("Az7S"),s=a("MLMA"),o=a("d/kO"),u=a("bybV"),d=a.n(u),m=r.a.createElement,p=function(e){var t=e.tocs,a=void 0===t?[]:t,r=Object(l.b)(),c=Object(n.useRef)(),u=Object(n.useState)(0),p=u[0],f=u[1],v=Object(n.useCallback)((function(e){try{var t=document.getElementById(e.id);t&&t.scrollIntoView()}catch(a){}}),[]);return Object(n.useEffect)((function(){var e=function(){a.reduceRight((function(e,t,a){var n=document.getElementById(t.id);return n?(Object(s.b)(n)&&(f(a),c.current.scrollTop=32*a),e):e}),null)};return document.addEventListener("scroll",e),function(){document.removeEventListener("scroll",e)}}),[a]),m("div",{className:d.a.wrapper},m("header",null,r("toc")),m("main",null,m("div",{ref:c},m("div",null,m(o.a,{length:a.length,options:{opacity:1,height:32,from:{opacity:0,height:0}},element:"div",renderItem:function(e){var t=a[e],n=t.level,r=Object(s.e)(n-1);return m("div",{className:i()(d.a.item,e===p&&d.a.active),style:{paddingLeft:12*(n-1),cursor:"pointer","--dot-left":10*(n-2)+"px","--dot-width":6-(n-1)+(r?1:0)+"px"},onClick:function(){return v(t)}},m("div",null,t.text))}}),m("div",{className:d.a.indicator,style:{top:32*p+"px"}})))))}}},[["NBH1",1,2,0,3,4,5,7,8,9,10,11,12,13,15,16,6]]]);